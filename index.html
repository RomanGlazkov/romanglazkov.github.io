<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Google Tag Manager -->
    <!-- <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-TNHJMQL');
    </script> -->
    <!-- End Google Tag Manager -->

    <!-- popupLibrary -->
    <!-- <script>
        (function (popupFunc) {
               var script = document.createElement('script');
               var firstScript = document.getElementsByTagName('script')[0];
               window[popupFunc] = window[popupFunc] || function () {
                   (window[popupFunc].actions = window[popupFunc].actions || []).push(arguments);
               };
               window[popupFunc].last_init = 1 * new Date()
               window['ACPopupFuncNamePlaceholder'] = popupFunc;
               script.async = true;
               script.src = 'https://pxl.roman-glazkov.dev.altkraft.com' + '/popup/v1/js/popupLibrary.js';
               firstScript.parentNode.insertBefore(script, firstScript);
        })('acpopup');
    </script> -->
    <!-- popupLibrary END -->

    <!-- START OF ALTCRAFT PIXEL CODE !-->
    <!-- <script type="text/javascript">
        !function(){var e={url:"https://pxl.roman-glazkov.dev.altkraft.com/pixel?k=34FyFph%2BVuzFYrhPh7C10IJo%2Br4EkbuWm%2Fqui6fGQJa6XD9SM9jghQ%3D%3D&s=OVA7pk7G%2FmI%3D",goals:"",value:parseFloat("0"),timeout:parseInt("0"),after_scroll:JSON.parse("false"),auto_load:JSON.parse("true")},o=function(o,t,n,a){var d=[].concat(o).map(function(e){return encodeURIComponent(e)}).join(","),c=encodeURIComponent(String(t||0)),i=encodeURIComponent(n.matching_mode||""),r=encodeURIComponent(n.db_id||0),u=encodeURIComponent(JSON.stringify(n.match||{})),l=encodeURIComponent(JSON.stringify(n.update||{}));setTimeout(function(){(new Image).src=[e.url,"goals="+d,"value="+c,"db_id="+r,"mmode="+i,"match="+u,"update="+l].join("&")},a)},t=!1,n=function(){t||(t=!0,e.after_scroll?document.addEventListener("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop>0)&&o(e.goals,e.value,{},e.timeout)},{once: true}):e.auto_load&&o(e.goals,e.value,{},e.timeout))};"complete"===document.readyState||"interactive"===document.readyState?n():window.addEventListener("load",n);window.ak_pixel_push=function(e,t,n,a,d,c){var i=[];Array.isArray(e)?i=e:i[0]=e,o(i,t,{match:n,update:a,matching_mode:d,db_id:c},0)}}();
    </script> -->
    <!-- END OF ALTCRAFT PIXEL CODE !-->

    <!-- Yandex.Metrika counter -->
    <!-- <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(97304545, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            ecommerce:"dataLayer"
        });
    </script> -->
    <!-- <noscript><div><img src="https://mc.yandex.ru/watch/97304545" style="position:absolute; left:-9999px;" alt="" /></div></noscript> -->
    <!-- /Yandex.Metrika counter -->

    <!-- ak-push SDK -->
    <!-- <script type="text/javascript" src="/ak-push.js"></script> -->
    <!-- <script src="https://pxl.roman-glazkov.dev.altkraft.com/ak_container.js?id=MXwxMQ==" ></script> -->
    <link rel="manifest" href="/manifest.json"></link>

    <!-- ACTM -->
    <script>
        (function (window, document, dataLayerName, containerID) {
            window[dataLayerName] = window[dataLayerName] || [];
            window[dataLayerName].push({ 'start': new Date().getTime(), event: 'actm-js' });
            var firstScript = document.getElementsByTagName('script')[0];
            var script = document.createElement('script');
            var dl = dataLayerName !== 'acDataLayer' ? '&l=' + dataLayerName : '';
            script.async = true;
            script.src = 'https://pxl.roman-glazkov.dev.altkraft.com/actm/js/actm.js?id=' + containerID + dl;
            script.type = 'module';
            if (firstScript && firstScript.parentNode) {
                firstScript.parentNode.insertBefore(script, firstScript);
            }
        }(window, document, 'acDataLayer', 'ATM-6aw8jjw6eBWa2OWCV'));
    </script>
    <!-- End ACTM -->
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <!-- <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNHJMQL" height="0" width="0" style="display:none;visibility:hidden"></iframe> -->
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <button id="init_sub" class="btn">Subscribe to push</button>

    <p>If you want to subscribe from Firefox/Safari, please try:</p>
    <button id="init_explicit_sub" class="btn">Subscribe explicitly</button>

    <div id="root"></div>

    <p class="jessy">Element with class .jessy</p>

    <button id="item_view" class="btn">Send YM view event</button>
    <button id="purchase_event" class="btn">Send GTM purchase event</button>

    <!-- Client routing -->
    <script type="text/javascript" src="./main.26180800.js"></script>
    <script>
        document.getElementById('init_sub').addEventListener('click', () => {
            const email = prompt('Enter an email for subscription');
            new AKPush().initSubscription({ email });
        });

        document.getElementById('init_explicit_sub').addEventListener('click', () => {
            new AKPush().initSubscription({ email: 'firefox_push_test@example.com' });
        });

        document.getElementById('item_view').addEventListener('click', () => {
            dataLayer.push({
                "ecommerce": {
                    "currencyCode": "RUB",
                    "detail": {
                        "products": [
                            {
                                "id": "P15432",
                                "name" : "Футболка",
                                "price": 477.60,
                                "brand": "Яндекс / Яndex",
                                "category": "Одежда/Мужская одежда/Футболки",
                                "variant" : "Красный цвет",
                                "list": "Результаты поиска",
                                "position": 1
                            }
                        ]
                    }
                }
            });
        });

        document.getElementById('purchase_event').addEventListener('click', () => {
            dataLayer.push({
            event: "purchase",
            ecommerce: {
                transaction_id: "T_12345",
                // Sum of (price * quantity) for all items.
                value: 72.05,
                tax: 3.60,
                shipping: 5.99,
                currency: "USD",
                coupon: "SUMMER_SALE",
                items: [
                    {
                        item_id: "SKU_12345",
                        item_name: "Stan and Friends Tee",
                        affiliation: "Google Merchandise Store",
                        coupon: "SUMMER_FUN",
                        discount: 2.22,
                        index: 0,
                        item_brand: "Google",
                        item_category: "Apparel",
                        item_category2: "Adult",
                        item_category3: "Shirts",
                        item_category4: "Crew",
                        item_category5: "Short sleeve",
                        item_list_id: "related_products",
                        item_list_name: "Related Products",
                        item_variant: "green",
                        location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
                        price: 10.01,
                        quantity: 3
                    },
                    {
                        item_id: "SKU_12346",
                        item_name: "Google Grey Women's Tee",
                        affiliation: "Google Merchandise Store",
                        coupon: "SUMMER_FUN",
                        discount: 3.33,
                        index: 1,
                        item_brand: "Google",
                        item_category: "Apparel",
                        item_category2: "Adult",
                        item_category3: "Shirts",
                        item_category4: "Crew",
                        item_category5: "Short sleeve",
                        item_list_id: "related_products",
                        item_list_name: "Related Products",
                        item_variant: "gray",
                        location_id: "ChIJIQBpAG2ahYAR_6128GcTUEo",
                        price: 21.01,
                        promotion_id: "P_12345",
                        promotion_name: "Summer Sale",
                        quantity: 2
                    }
                ]
            }
            });
        });
    </script>
</body>
</html>
