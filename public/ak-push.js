/*! Commit hash: 73f80c5 */
(()=>{var e={7:e=>{"use strict";var t=typeof Reflect==="object"?Reflect:null;var r=t&&typeof t.apply==="function"?t.apply:function e(t,r,n){return Function.prototype.apply.call(t,r,n)};var n;if(t&&typeof t.ownKeys==="function"){n=t.ownKeys}else if(Object.getOwnPropertySymbols){n=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{n=function e(t){return Object.getOwnPropertyNames(t)}}function i(e){if(console&&console.warn)console.warn(e)}var o=Number.isNaN||function e(t){return t!==t};function s(){s.init.call(this)}e.exports=s;e.exports.once=m;s.EventEmitter=s;s.prototype._events=undefined;s.prototype._eventsCount=0;s.prototype._maxListeners=undefined;var a=10;function c(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:true,get:function(){return a},set:function(e){if(typeof e!=="number"||e<0||o(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}a=e}});s.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};s.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||o(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function u(e){if(e._maxListeners===undefined)return s.defaultMaxListeners;return e._maxListeners}s.prototype.getMaxListeners=function e(){return u(this)};s.prototype.emit=function e(t){var n=[];for(var i=1;i<arguments.length;i++)n.push(arguments[i]);var o=t==="error";var s=this._events;if(s!==undefined)o=o&&s.error===undefined;else if(!o)return false;if(o){var a;if(n.length>0)a=n[0];if(a instanceof Error){throw a}var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));c.context=a;throw c}var u=s[t];if(u===undefined)return false;if(typeof u==="function"){r(u,this,n)}else{var f=u.length;var l=v(u,f);for(var i=0;i<f;++i)r(l[i],this,n)}return true};function f(e,t,r,n){var o;var s;var a;c(r);s=e._events;if(s===undefined){s=e._events=Object.create(null);e._eventsCount=0}else{if(s.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);s=e._events}a=s[t]}if(a===undefined){a=s[t]=r;++e._eventsCount}else{if(typeof a==="function"){a=s[t]=n?[r,a]:[a,r]}else if(n){a.unshift(r)}else{a.push(r)}o=u(e);if(o>0&&a.length>o&&!a.warned){a.warned=true;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");f.name="MaxListenersExceededWarning";f.emitter=e;f.type=t;f.count=a.length;i(f)}}return e}s.prototype.addListener=function e(t,r){return f(this,t,r,false)};s.prototype.on=s.prototype.addListener;s.prototype.prependListener=function e(t,r){return f(this,t,r,true)};function l(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function d(e,t,r){var n={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var i=l.bind(n);i.listener=r;n.wrapFn=i;return i}s.prototype.once=function e(t,r){c(r);this.on(t,d(this,t,r));return this};s.prototype.prependOnceListener=function e(t,r){c(r);this.prependListener(t,d(this,t,r));return this};s.prototype.removeListener=function e(t,r){var n,i,o,s,a;c(r);i=this._events;if(i===undefined)return this;n=i[t];if(n===undefined)return this;if(n===r||n.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete i[t];if(i.removeListener)this.emit("removeListener",t,n.listener||r)}}else if(typeof n!=="function"){o=-1;for(s=n.length-1;s>=0;s--){if(n[s]===r||n[s].listener===r){a=n[s].listener;o=s;break}}if(o<0)return this;if(o===0)n.shift();else{g(n,o)}if(n.length===1)i[t]=n[0];if(i.removeListener!==undefined)this.emit("removeListener",t,a||r)}return this};s.prototype.off=s.prototype.removeListener;s.prototype.removeAllListeners=function e(t){var r,n,i;n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[t]}return this}if(arguments.length===0){var o=Object.keys(n);var s;for(i=0;i<o.length;++i){s=o[i];if(s==="removeListener")continue;this.removeAllListeners(s)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=n[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(i=r.length-1;i>=0;i--){this.removeListener(t,r[i])}}return this};function h(e,t,r){var n=e._events;if(n===undefined)return[];var i=n[t];if(i===undefined)return[];if(typeof i==="function")return r?[i.listener||i]:[i];return r?b(i):v(i,i.length)}s.prototype.listeners=function e(t){return h(this,t,true)};s.prototype.rawListeners=function e(t){return h(this,t,false)};s.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return p.call(e,t)}};s.prototype.listenerCount=p;function p(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}s.prototype.eventNames=function e(){return this._eventsCount>0?n(this._events):[]};function v(e,t){var r=new Array(t);for(var n=0;n<t;++n)r[n]=e[n];return r}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function m(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o);n(r)}function o(){if(typeof e.removeListener==="function"){e.removeListener("error",i)}r([].slice.call(arguments))}y(e,t,o,{once:true});if(t!=="error"){w(e,i,{once:true})}}))}function w(e,t,r){if(typeof e.on==="function"){y(e,"error",t,r)}}function y(e,t,r,n){if(typeof e.on==="function"){if(n.once){e.once(t,r)}else{e.on(t,r)}}else if(typeof e.addEventListener==="function"){e.addEventListener(t,(function i(o){if(n.once){e.removeEventListener(t,i)}r(o)}))}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}}},63:e=>{"use strict";e.exports=function e(t,r){r=r.split(":")[0];t=+t;if(!t)return false;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return false}return t!==0}},160:(e,t,r)=>{"use strict";var n=r(63),i=r(992),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,f=/^[a-zA-Z]:/;function l(e){return(e?e:"").toString().replace(o,"")}var d=[["#","hash"],["?","query"],function e(t,r){return v(r.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",undefined,1,1],[/:(\d*)$/,"port",undefined,1],[NaN,"hostname",undefined,1,1]];var h={hash:1,query:1};function p(e){var t;if(typeof window!=="undefined")t=window;else if(typeof r.g!=="undefined")t=r.g;else if(typeof self!=="undefined")t=self;else t={};var n=t.location||{};e=e||n;var i={},o=typeof e,s;if("blob:"===e.protocol){i=new m(unescape(e.pathname),{})}else if("string"===o){i=new m(e,{});for(s in h)delete i[s]}else if("object"===o){for(s in e){if(s in h)continue;i[s]=e[s]}if(i.slashes===undefined){i.slashes=a.test(e.href)}}return i}function v(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function g(e,t){e=l(e);e=e.replace(s,"");t=t||{};var r=u.exec(e);var n=r[1]?r[1].toLowerCase():"";var i=!!r[2];var o=!!r[3];var a=0;var c;if(i){if(o){c=r[2]+r[3]+r[4];a=r[2].length+r[3].length}else{c=r[2]+r[4];a=r[2].length}}else{if(o){c=r[3]+r[4];a=r[3].length}else{c=r[4]}}if(n==="file:"){if(a>=2){c=c.slice(2)}}else if(v(n)){c=r[4]}else if(n){if(i){c=c.slice(2)}}else if(a>=2&&v(t.protocol)){c=r[4]}return{protocol:n,slashes:i||v(n),slashesCount:a,rest:c}}function b(e,t){if(e==="")return t;var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=false,s=0;while(n--){if(r[n]==="."){r.splice(n,1)}else if(r[n]===".."){r.splice(n,1);s++}else if(s){if(n===0)o=true;r.splice(n,1);s--}}if(o)r.unshift("");if(i==="."||i==="..")r.push("");return r.join("/")}function m(e,t,r){e=l(e);e=e.replace(s,"");if(!(this instanceof m)){return new m(e,t,r)}var o,a,c,u,h,w,y=d.slice(),_=typeof t,S=this,k=0;if("object"!==_&&"string"!==_){r=t;t=null}if(r&&"function"!==typeof r)r=i.parse;t=p(t);a=g(e||"",t);o=!a.protocol&&!a.slashes;S.slashes=a.slashes||o&&t.slashes;S.protocol=a.protocol||t.protocol||"";e=a.rest;if(a.protocol==="file:"&&(a.slashesCount!==2||f.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!v(S.protocol))){y[3]=[/(.*)/,"pathname"]}for(;k<y.length;k++){u=y[k];if(typeof u==="function"){e=u(e,S);continue}c=u[0];w=u[1];if(c!==c){S[w]=e}else if("string"===typeof c){h=c==="@"?e.lastIndexOf(c):e.indexOf(c);if(~h){if("number"===typeof u[2]){S[w]=e.slice(0,h);e=e.slice(h+u[2])}else{S[w]=e.slice(h);e=e.slice(0,h)}}}else if(h=c.exec(e)){S[w]=h[1];e=e.slice(0,h.index)}S[w]=S[w]||(o&&u[3]?t[w]||"":"");if(u[4])S[w]=S[w].toLowerCase()}if(r)S.query=r(S.query);if(o&&t.slashes&&S.pathname.charAt(0)!=="/"&&(S.pathname!==""||t.pathname!=="")){S.pathname=b(S.pathname,t.pathname)}if(S.pathname.charAt(0)!=="/"&&v(S.protocol)){S.pathname="/"+S.pathname}if(!n(S.port,S.protocol)){S.host=S.hostname;S.port=""}S.username=S.password="";if(S.auth){h=S.auth.indexOf(":");if(~h){S.username=S.auth.slice(0,h);S.username=encodeURIComponent(decodeURIComponent(S.username));S.password=S.auth.slice(h+1);S.password=encodeURIComponent(decodeURIComponent(S.password))}else{S.username=encodeURIComponent(decodeURIComponent(S.auth))}S.auth=S.password?S.username+":"+S.password:S.username}S.origin=S.protocol!=="file:"&&v(S.protocol)&&S.host?S.protocol+"//"+S.host:"null";S.href=S.toString()}function w(e,t,r){var o=this;switch(e){case"query":if("string"===typeof t&&t.length){t=(r||i.parse)(t)}o[e]=t;break;case"port":o[e]=t;if(!n(t,o.protocol)){o.host=o.hostname;o[e]=""}else if(t){o.host=o.hostname+":"+t}break;case"hostname":o[e]=t;if(o.port)t+=":"+o.port;o.host=t;break;case"host":o[e]=t;if(c.test(t)){t=t.split(":");o.port=t.pop();o.hostname=t.join(":")}else{o.hostname=t;o.port=""}break;case"protocol":o.protocol=t.toLowerCase();o.slashes=!r;break;case"pathname":case"hash":if(t){var s=e==="pathname"?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else{o[e]=t}break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");if(~a){o.username=t.slice(0,a);o.username=encodeURIComponent(decodeURIComponent(o.username));o.password=t.slice(a+1);o.password=encodeURIComponent(decodeURIComponent(o.password))}else{o.username=encodeURIComponent(decodeURIComponent(t))}}for(var u=0;u<d.length;u++){var f=d[u];if(f[4])o[f[1]]=o[f[1]].toLowerCase()}o.auth=o.password?o.username+":"+o.password:o.username;o.origin=o.protocol!=="file:"&&v(o.protocol)&&o.host?o.protocol+"//"+o.host:"null";o.href=o.toString();return o}function y(e){if(!e||"function"!==typeof e)e=i.stringify;var t,r=this,n=r.host,o=r.protocol;if(o&&o.charAt(o.length-1)!==":")o+=":";var s=o+(r.protocol&&r.slashes||v(r.protocol)?"//":"");if(r.username){s+=r.username;if(r.password)s+=":"+r.password;s+="@"}else if(r.password){s+=":"+r.password;s+="@"}else if(r.protocol!=="file:"&&v(r.protocol)&&!n&&r.pathname!=="/"){s+="@"}if(n[n.length-1]===":"||c.test(r.hostname)&&!r.port){n+=":"}s+=n+r.pathname;t="object"===typeof r.query?e(r.query):r.query;if(t)s+="?"!==t.charAt(0)?"?"+t:t;if(r.hash)s+=r.hash;return s}m.prototype={set:w,toString:y};m.extractProtocol=g;m.location=p;m.trimLeft=l;m.qs=i;e.exports=m},790:(e,t,r)=>{(function(t){if(true){e.exports=t()}else{var r}})((function(){var e,t,n;return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var c=undefined;if(!a&&c)return require(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};t[s][0].call(f.exports,(function(e){var r=t[s][1][e];return i(r?r:e)}),f,f.exports,e,t,r,n)}return r[s].exports}var o=undefined;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){(function(e){"use strict";var r=e.MutationObserver||e.WebKitMutationObserver;var n;{if(r){var i=0;var o=new r(f);var s=e.document.createTextNode("");o.observe(s,{characterData:true});n=function(){s.data=i=++i%2}}else if(!e.setImmediate&&typeof e.MessageChannel!=="undefined"){var a=new e.MessageChannel;a.port1.onmessage=f;n=function(){a.port2.postMessage(0)}}else if("document"in e&&"onreadystatechange"in e.document.createElement("script")){n=function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f();t.onreadystatechange=null;t.parentNode.removeChild(t);t=null};e.document.documentElement.appendChild(t)}}else{n=function(){setTimeout(f,0)}}}var c;var u=[];function f(){c=true;var e,t;var r=u.length;while(r){t=u;u=[];e=-1;while(++e<r){t[e]()}r=u.length}c=false}t.exports=l;function l(e){if(u.push(e)===1&&!c){n()}}}).call(this,typeof r.g!=="undefined"?r.g:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function i(){}var o={};var s=["REJECTED"];var a=["FULFILLED"];var c=["PENDING"];t.exports=u;function u(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function")}this.state=c;this.queue=[];this.outcome=void 0;if(e!==i){h(this,e)}}u.prototype["catch"]=function(e){return this.then(null,e)};u.prototype.then=function(e,t){if(typeof e!=="function"&&this.state===a||typeof t!=="function"&&this.state===s){return this}var r=new this.constructor(i);if(this.state!==c){var n=this.state===a?e:t;l(r,n,this.outcome)}else{this.queue.push(new f(r,e,t))}return r};function f(e,t,r){this.promise=e;if(typeof t==="function"){this.onFulfilled=t;this.callFulfilled=this.otherCallFulfilled}if(typeof r==="function"){this.onRejected=r;this.callRejected=this.otherCallRejected}}f.prototype.callFulfilled=function(e){o.resolve(this.promise,e)};f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)};f.prototype.callRejected=function(e){o.reject(this.promise,e)};f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)};function l(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}if(n===e){o.reject(e,new TypeError("Cannot resolve promise with itself"))}else{o.resolve(e,n)}}))}o.resolve=function(e,t){var r=p(d,t);if(r.status==="error"){return o.reject(e,r.value)}var n=r.value;if(n){h(e,n)}else{e.state=a;e.outcome=t;var i=-1;var s=e.queue.length;while(++i<s){e.queue[i].callFulfilled(t)}}return e};o.reject=function(e,t){e.state=s;e.outcome=t;var r=-1;var n=e.queue.length;while(++r<n){e.queue[r].callRejected(t)}return e};function d(e){var t=e&&e.then;if(e&&(typeof e==="object"||typeof e==="function")&&typeof t==="function"){return function r(){t.apply(e,arguments)}}}function h(e,t){var r=false;function n(t){if(r){return}r=true;o.reject(e,t)}function i(t){if(r){return}r=true;o.resolve(e,t)}function s(){t(i,n)}var a=p(s);if(a.status==="error"){n(a.value)}}function p(e,t){var r={};try{r.value=e(t);r.status="success"}catch(e){r.status="error";r.value=e}return r}u.resolve=v;function v(e){if(e instanceof this){return e}return o.resolve(new this(i),e)}u.reject=g;function g(e){var t=new this(i);return o.reject(t,e)}u.all=b;function b(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var r=e.length;var n=false;if(!r){return this.resolve([])}var s=new Array(r);var a=0;var c=-1;var u=new this(i);while(++c<r){f(e[c],c)}return u;function f(e,i){t.resolve(e).then(c,(function(e){if(!n){n=true;o.reject(u,e)}}));function c(e){s[i]=e;if(++a===r&&!n){n=true;o.resolve(u,s)}}}}u.race=m;function m(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var r=e.length;var n=false;if(!r){return this.resolve([])}var s=-1;var a=new this(i);while(++s<r){c(e[s])}return a;function c(e){t.resolve(e).then((function(e){if(!n){n=true;o.resolve(a,e)}}),(function(e){if(!n){n=true;o.reject(a,e)}}))}}},{1:1}],3:[function(e,t,n){(function(t){"use strict";if(typeof t.Promise!=="function"){t.Promise=e(2)}}).call(this,typeof r.g!=="undefined"?r.g:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(){try{if(typeof indexedDB!=="undefined"){return indexedDB}if(typeof webkitIndexedDB!=="undefined"){return webkitIndexedDB}if(typeof mozIndexedDB!=="undefined"){return mozIndexedDB}if(typeof OIndexedDB!=="undefined"){return OIndexedDB}if(typeof msIndexedDB!=="undefined"){return msIndexedDB}}catch(e){return}}var s=o();function a(){try{if(!s||!s.open){return false}var e=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);var t=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||t)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(e){return false}}function c(e,t){e=e||[];t=t||{};try{return new Blob(e,t)}catch(o){if(o.name!=="TypeError"){throw o}var r=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder;var n=new r;for(var i=0;i<e.length;i+=1){n.append(e[i])}return n.getBlob(t.type)}}if(typeof Promise==="undefined"){e(3)}var u=Promise;function f(e,t){if(t){e.then((function(e){t(null,e)}),(function(e){t(e)}))}}function l(e,t,r){if(typeof t==="function"){e.then(t)}if(typeof r==="function"){e["catch"](r)}}function d(e){if(typeof e!=="string"){console.warn(e+" used as a key, but it is not a string.");e=String(e)}return e}function h(){if(arguments.length&&typeof arguments[arguments.length-1]==="function"){return arguments[arguments.length-1]}}var p="local-forage-detect-blob-support";var v=void 0;var g={};var b=Object.prototype.toString;var m="readonly";var w="readwrite";function y(e){var t=e.length;var r=new ArrayBuffer(t);var n=new Uint8Array(r);for(var i=0;i<t;i++){n[i]=e.charCodeAt(i)}return r}function _(e){return new u((function(t){var r=e.transaction(p,w);var n=c([""]);r.objectStore(p).put(n,"key");r.onabort=function(e){e.preventDefault();e.stopPropagation();t(false)};r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);var r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}))["catch"]((function(){return false}))}function S(e){if(typeof v==="boolean"){return u.resolve(v)}return _(e).then((function(e){v=e;return v}))}function k(e){var t=g[e.name];var r={};r.promise=new u((function(e,t){r.resolve=e;r.reject=t}));t.deferredOperations.push(r);if(!t.dbReady){t.dbReady=r.promise}else{t.dbReady=t.dbReady.then((function(){return r.promise}))}}function I(e){var t=g[e.name];var r=t.deferredOperations.pop();if(r){r.resolve();return r.promise}}function C(e,t){var r=g[e.name];var n=r.deferredOperations.pop();if(n){n.reject(t);return n.promise}}function E(e,t){return new u((function(r,n){g[e.name]=g[e.name]||F();if(e.db){if(t){k(e);e.db.close()}else{return r(e.db)}}var i=[e.name];if(t){i.push(e.version)}var o=s.open.apply(s,i);if(t){o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName);if(t.oldVersion<=1){r.createObjectStore(p)}}catch(r){if(r.name==="ConstraintError"){console.warn('The database "'+e.name+'"'+" has been upgraded from version "+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}else{throw r}}}}o.onerror=function(e){e.preventDefault();n(o.error)};o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()};r(t);I(e)}}))}function P(e){return E(e,false)}function O(e){return E(e,true)}function M(e,t){if(!e.db){return true}var r=!e.db.objectStoreNames.contains(e.storeName);var n=e.version<e.db.version;var i=e.version>e.db.version;if(n){if(e.version!==t){console.warn('The database "'+e.name+'"'+" can't be downgraded from version "+e.db.version+" to version "+e.version+".")}e.version=e.db.version}if(i||r){if(r){var o=e.db.version+1;if(o>e.version){e.version=o}}return true}return false}function A(e){return new u((function(t,r){var n=new FileReader;n.onerror=r;n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:true,data:n,type:e.type})};n.readAsBinaryString(e)}))}function N(e){var t=y(atob(e.data));return c([t],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function x(e){var t=this;var r=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady){return e.dbReady}}));l(r,e,e);return r}function D(e){k(e);var t=g[e.name];var r=t.forages;for(var n=0;n<r.length;n++){var i=r[n];if(i._dbInfo.db){i._dbInfo.db.close();i._dbInfo.db=null}}e.db=null;return P(e).then((function(t){e.db=t;if(M(e)){return O(e)}return t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++){r[i]._dbInfo.db=n}}))["catch"]((function(t){C(e,t);throw t}))}function R(e,t,r,n){if(n===undefined){n=1}try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||i.name==="InvalidStateError"||i.name==="NotFoundError")){return u.resolve().then((function(){if(!e.db||i.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version){if(e.db){e.version=e.db.version+1}return O(e)}})).then((function(){return D(e).then((function(){R(e,t,r,n-1)}))}))["catch"](r)}r(i)}}function F(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this;var r={db:null};if(e){for(var n in e){r[n]=e[n]}}var i=g[r.name];if(!i){i=F();g[r.name]=i}i.forages.push(t);if(!t._initReady){t._initReady=t.ready;t.ready=x}var o=[];function s(){return u.resolve()}for(var a=0;a<i.forages.length;a++){var c=i.forages[a];if(c!==t){o.push(c._initReady()["catch"](s))}}var f=i.forages.slice(0);return u.all(o).then((function(){r.db=i.db;return P(r)})).then((function(e){r.db=e;if(M(r,t._defaultConfig.version)){return O(r)}return e})).then((function(e){r.db=i.db=e;t._dbInfo=r;for(var n=0;n<f.length;n++){var o=f[n];if(o!==t){o._dbInfo.db=r.db;o._dbInfo.version=r.version}}}))}function j(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){R(r._dbInfo,m,(function(i,o){if(i){return n(i)}try{var s=o.objectStore(r._dbInfo.storeName);var a=s.get(e);a.onsuccess=function(){var e=a.result;if(e===undefined){e=null}if(T(e)){e=N(e)}t(e)};a.onerror=function(){n(a.error)}}catch(e){n(e)}}))}))["catch"](n)}));f(n,t);return n}function B(e,t){var r=this;var n=new u((function(t,n){r.ready().then((function(){R(r._dbInfo,m,(function(i,o){if(i){return n(i)}try{var s=o.objectStore(r._dbInfo.storeName);var a=s.openCursor();var c=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;if(T(n)){n=N(n)}var i=e(n,r.key,c++);if(i!==void 0){t(i)}else{r["continue"]()}}else{t()}};a.onerror=function(){n(a.error)}}catch(e){n(e)}}))}))["catch"](n)}));f(n,t);return n}function W(e,t,r){var n=this;e=d(e);var i=new u((function(r,i){var o;n.ready().then((function(){o=n._dbInfo;if(b.call(t)==="[object Blob]"){return S(o.db).then((function(e){if(e){return t}return A(t)}))}return t})).then((function(t){R(n._dbInfo,w,(function(o,s){if(o){return i(o)}try{var a=s.objectStore(n._dbInfo.storeName);if(t===null){t=undefined}var c=a.put(t,e);s.oncomplete=function(){if(t===undefined){t=null}r(t)};s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}}))}))["catch"](i)}));f(i,r);return i}function z(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){R(r._dbInfo,w,(function(i,o){if(i){return n(i)}try{var s=o.objectStore(r._dbInfo.storeName);var a=s["delete"](e);o.oncomplete=function(){t()};o.onerror=function(){n(a.error)};o.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}}))}))["catch"](n)}));f(n,t);return n}function U(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){R(t._dbInfo,w,(function(n,i){if(n){return r(n)}try{var o=i.objectStore(t._dbInfo.storeName);var s=o.clear();i.oncomplete=function(){e()};i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}}))}))["catch"](r)}));f(r,e);return r}function H(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){R(t._dbInfo,m,(function(n,i){if(n){return r(n)}try{var o=i.objectStore(t._dbInfo.storeName);var s=o.count();s.onsuccess=function(){e(s.result)};s.onerror=function(){r(s.error)}}catch(e){r(e)}}))}))["catch"](r)}));f(r,e);return r}function V(e,t){var r=this;var n=new u((function(t,n){if(e<0){t(null);return}r.ready().then((function(){R(r._dbInfo,m,(function(i,o){if(i){return n(i)}try{var s=o.objectStore(r._dbInfo.storeName);var a=false;var c=s.openKeyCursor();c.onsuccess=function(){var r=c.result;if(!r){t(null);return}if(e===0){t(r.key)}else{if(!a){a=true;r.advance(e)}else{t(r.key)}}};c.onerror=function(){n(c.error)}}catch(e){n(e)}}))}))["catch"](n)}));f(n,t);return n}function $(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){R(t._dbInfo,m,(function(n,i){if(n){return r(n)}try{var o=i.objectStore(t._dbInfo.storeName);var s=o.openKeyCursor();var a=[];s.onsuccess=function(){var t=s.result;if(!t){e(a);return}a.push(t.key);t["continue"]()};s.onerror=function(){r(s.error)}}catch(e){r(e)}}))}))["catch"](r)}));f(r,e);return r}function q(e,t){t=h.apply(this,arguments);var r=this.config();e=typeof e!=="function"&&e||{};if(!e.name){e.name=e.name||r.name;e.storeName=e.storeName||r.storeName}var n=this;var i;if(!e.name){i=u.reject("Invalid arguments")}else{var o=e.name===r.name&&n._dbInfo.db;var a=o?u.resolve(n._dbInfo.db):P(e).then((function(t){var r=g[e.name];var n=r.forages;r.db=t;for(var i=0;i<n.length;i++){n[i]._dbInfo.db=t}return t}));if(!e.storeName){i=a.then((function(t){k(e);var r=g[e.name];var n=r.forages;t.close();for(var i=0;i<n.length;i++){var o=n[i];o._dbInfo.db=null}var a=new u((function(t,r){var n=s.deleteDatabase(e.name);n.onerror=function(){var e=n.result;if(e){e.close()}r(n.error)};n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')};n.onsuccess=function(){var e=n.result;if(e){e.close()}t(e)}}));return a.then((function(e){r.db=e;for(var t=0;t<n.length;t++){var i=n[t];I(i._dbInfo)}}))["catch"]((function(t){(C(e,t)||u.resolve())["catch"]((function(){}));throw t}))}))}else{i=a.then((function(t){if(!t.objectStoreNames.contains(e.storeName)){return}var r=t.version+1;k(e);var n=g[e.name];var i=n.forages;t.close();for(var o=0;o<i.length;o++){var a=i[o];a._dbInfo.db=null;a._dbInfo.version=r}var c=new u((function(t,n){var i=s.open(e.name,r);i.onerror=function(e){var t=i.result;t.close();n(e)};i.onupgradeneeded=function(){var t=i.result;t.deleteObjectStore(e.storeName)};i.onsuccess=function(){var e=i.result;e.close();t(e)}}));return c.then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e;I(r._dbInfo)}}))["catch"]((function(t){(C(e,t)||u.resolve())["catch"]((function(){}));throw t}))}))}}f(i,t);return i}var K={_driver:"asyncStorage",_initStorage:L,_support:a(),iterate:B,getItem:j,setItem:W,removeItem:z,clear:U,length:H,key:V,keys:$,dropInstance:q};function G(){return typeof openDatabase==="function"}var J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var X="~~local_forage_type~";var Q=/^~~local_forage_type~([^~]+)~/;var Z="__lfsc__:";var Y=Z.length;var ee="arbf";var te="blob";var re="si08";var ne="ui08";var ie="uic8";var oe="si16";var se="si32";var ae="ur16";var ce="ui32";var ue="fl32";var fe="fl64";var le=Y+ee.length;var de=Object.prototype.toString;function he(e){var t=e.length*.75;var r=e.length;var n;var i=0;var o,s,a,c;if(e[e.length-1]==="="){t--;if(e[e.length-2]==="="){t--}}var u=new ArrayBuffer(t);var f=new Uint8Array(u);for(n=0;n<r;n+=4){o=J.indexOf(e[n]);s=J.indexOf(e[n+1]);a=J.indexOf(e[n+2]);c=J.indexOf(e[n+3]);f[i++]=o<<2|s>>4;f[i++]=(s&15)<<4|a>>2;f[i++]=(a&3)<<6|c&63}return u}function pe(e){var t=new Uint8Array(e);var r="";var n;for(n=0;n<t.length;n+=3){r+=J[t[n]>>2];r+=J[(t[n]&3)<<4|t[n+1]>>4];r+=J[(t[n+1]&15)<<2|t[n+2]>>6];r+=J[t[n+2]&63]}if(t.length%3===2){r=r.substring(0,r.length-1)+"="}else if(t.length%3===1){r=r.substring(0,r.length-2)+"=="}return r}function ve(e,t){var r="";if(e){r=de.call(e)}if(e&&(r==="[object ArrayBuffer]"||e.buffer&&de.call(e.buffer)==="[object ArrayBuffer]")){var n;var i=Z;if(e instanceof ArrayBuffer){n=e;i+=ee}else{n=e.buffer;if(r==="[object Int8Array]"){i+=re}else if(r==="[object Uint8Array]"){i+=ne}else if(r==="[object Uint8ClampedArray]"){i+=ie}else if(r==="[object Int16Array]"){i+=oe}else if(r==="[object Uint16Array]"){i+=ae}else if(r==="[object Int32Array]"){i+=se}else if(r==="[object Uint32Array]"){i+=ce}else if(r==="[object Float32Array]"){i+=ue}else if(r==="[object Float64Array]"){i+=fe}else{t(new Error("Failed to get type for BinaryArray"))}}t(i+pe(n))}else if(r==="[object Blob]"){var o=new FileReader;o.onload=function(){var r=X+e.type+"~"+pe(this.result);t(Z+te+r)};o.readAsArrayBuffer(e)}else{try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e);t(null,r)}}}function ge(e){if(e.substring(0,Y)!==Z){return JSON.parse(e)}var t=e.substring(le);var r=e.substring(Y,le);var n;if(r===te&&Q.test(t)){var i=t.match(Q);n=i[1];t=t.substring(i[0].length)}var o=he(t);switch(r){case ee:return o;case te:return c([o],{type:n});case re:return new Int8Array(o);case ne:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ae:return new Uint16Array(o);case se:return new Int32Array(o);case ce:return new Uint32Array(o);case ue:return new Float32Array(o);case fe:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var be={serialize:ve,deserialize:ge,stringToBuffer:he,bufferToString:pe};function me(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" "+"(id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function we(e){var t=this;var r={db:null};if(e){for(var n in e){r[n]=typeof e[n]!=="string"?e[n].toString():e[n]}}var i=new u((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(i){me(i,r,(function(){t._dbInfo=r;e()}),(function(e,t){n(t)}))}),n)}));r.serializer=be;return i}function ye(e,t,r,n,i,o){e.executeSql(r,n,i,(function(e,s){if(s.code===s.SYNTAX_ERR){e.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name = ?",[t.storeName],(function(e,a){if(!a.rows.length){me(e,t,(function(){e.executeSql(r,n,i,o)}),o)}else{o(e,s)}}),o)}else{o(e,s)}}),o)}function _e(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ye(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;if(n){n=i.serializer.deserialize(n)}t(n)}),(function(e,t){n(t)}))}))}))["catch"](n)}));f(n,t);return n}function Se(e,t){var r=this;var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ye(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){var o=n.rows;var s=o.length;for(var a=0;a<s;a++){var c=o.item(a);var u=c.value;if(u){u=i.serializer.deserialize(u)}u=e(u,c.key,a+1);if(u!==void 0){t(u);return}}t()}),(function(e,t){n(t)}))}))}))["catch"](n)}));f(n,t);return n}function ke(e,t,r,n){var i=this;e=d(e);var o=new u((function(o,s){i.ready().then((function(){if(t===undefined){t=null}var a=t;var c=i._dbInfo;c.serializer.serialize(t,(function(t,u){if(u){s(u)}else{c.db.transaction((function(r){ye(r,c,"INSERT OR REPLACE INTO "+c.storeName+" "+"(key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0){o(ke.apply(i,[e,a,r,n-1]));return}s(t)}}))}}))}))["catch"](s)}));f(o,r);return o}function Ie(e,t,r){return ke.apply(this,[e,t,r,1])}function Ce(e,t){var r=this;e=d(e);var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ye(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))}))["catch"](n)}));f(n,t);return n}function Ee(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ye(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))}))["catch"](r)}));f(r,e);return r}function Pe(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ye(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))}))["catch"](r)}));f(r,e);return r}function Oe(e,t){var r=this;var n=new u((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){ye(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))}))["catch"](n)}));f(n,t);return n}function Me(e){var t=this;var r=new u((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ye(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){var n=[];for(var i=0;i<r.rows.length;i++){n.push(r.rows.item(i).key)}e(n)}),(function(e,t){r(t)}))}))}))["catch"](r)}));f(r,e);return r}function Ae(e){return new u((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){var i=[];for(var o=0;o<n.rows.length;o++){i.push(n.rows.item(o).name)}t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Ne(e,t){t=h.apply(this,arguments);var r=this.config();e=typeof e!=="function"&&e||{};if(!e.name){e.name=e.name||r.name;e.storeName=e.storeName||r.storeName}var n=this;var i;if(!e.name){i=u.reject("Invalid arguments")}else{i=new u((function(t){var i;if(e.name===r.name){i=n._dbInfo.db}else{i=openDatabase(e.name,"","",0)}if(!e.storeName){t(Ae(i))}else{t({db:i,storeNames:[e.storeName]})}})).then((function(e){return new u((function(t,r){e.db.transaction((function(n){function i(e){return new u((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}var o=[];for(var s=0,a=e.storeNames.length;s<a;s++){o.push(i(e.storeNames[s]))}u.all(o).then((function(){t()}))["catch"]((function(e){r(e)}))}),(function(e){r(e)}))}))}))}f(i,t);return i}var Te={_driver:"webSQLStorage",_initStorage:we,_support:G(),iterate:Se,getItem:_e,setItem:Ie,removeItem:Ce,clear:Ee,length:Pe,key:Oe,keys:Me,dropInstance:Ne};function xe(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return false}}function De(e,t){var r=e.name+"/";if(e.storeName!==t.storeName){r+=e.storeName+"/"}return r}function Re(){var e="_localforage_support_test";try{localStorage.setItem(e,true);localStorage.removeItem(e);return false}catch(e){return true}}function Fe(){return!Re()||localStorage.length>0}function Le(e){var t=this;var r={};if(e){for(var n in e){r[n]=e[n]}}r.keyPrefix=De(e,t._defaultConfig);if(!Fe()){return u.reject()}t._dbInfo=r;r.serializer=be;return u.resolve()}function je(e){var t=this;var r=t.ready().then((function(){var e=t._dbInfo.keyPrefix;for(var r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);if(n.indexOf(e)===0){localStorage.removeItem(n)}}}));f(r,e);return r}function Be(e,t){var r=this;e=d(e);var n=r.ready().then((function(){var t=r._dbInfo;var n=localStorage.getItem(t.keyPrefix+e);if(n){n=t.serializer.deserialize(n)}return n}));f(n,t);return n}function We(e,t){var r=this;var n=r.ready().then((function(){var t=r._dbInfo;var n=t.keyPrefix;var i=n.length;var o=localStorage.length;var s=1;for(var a=0;a<o;a++){var c=localStorage.key(a);if(c.indexOf(n)!==0){continue}var u=localStorage.getItem(c);if(u){u=t.serializer.deserialize(u)}u=e(u,c.substring(i),s++);if(u!==void 0){return u}}}));f(n,t);return n}function ze(e,t){var r=this;var n=r.ready().then((function(){var t=r._dbInfo;var n;try{n=localStorage.key(e)}catch(e){n=null}if(n){n=n.substring(t.keyPrefix.length)}return n}));f(n,t);return n}function Ue(e){var t=this;var r=t.ready().then((function(){var e=t._dbInfo;var r=localStorage.length;var n=[];for(var i=0;i<r;i++){var o=localStorage.key(i);if(o.indexOf(e.keyPrefix)===0){n.push(o.substring(e.keyPrefix.length))}}return n}));f(r,e);return r}function He(e){var t=this;var r=t.keys().then((function(e){return e.length}));f(r,e);return r}function Ve(e,t){var r=this;e=d(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));f(n,t);return n}function $e(e,t,r){var n=this;e=d(e);var i=n.ready().then((function(){if(t===undefined){t=null}var r=t;return new u((function(i,o){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n){o(n)}else{try{localStorage.setItem(s.keyPrefix+e,t);i(r)}catch(e){if(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED"){o(e)}o(e)}}}))}))}));f(i,r);return i}function qe(e,t){t=h.apply(this,arguments);e=typeof e!=="function"&&e||{};if(!e.name){var r=this.config();e.name=e.name||r.name;e.storeName=e.storeName||r.storeName}var n=this;var i;if(!e.name){i=u.reject("Invalid arguments")}else{i=new u((function(t){if(!e.storeName){t(e.name+"/")}else{t(De(e,n._defaultConfig))}})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);if(r.indexOf(e)===0){localStorage.removeItem(r)}}}))}f(i,t);return i}var Ke={_driver:"localStorageWrapper",_initStorage:Le,_support:xe(),iterate:We,getItem:Be,setItem:$e,removeItem:Ve,clear:je,length:He,key:ze,keys:Ue,dropInstance:qe};var Ge=function e(t,r){return t===r||typeof t==="number"&&typeof r==="number"&&isNaN(t)&&isNaN(r)};var Je=function e(t,r){var n=t.length;var i=0;while(i<n){if(Ge(t[i],r)){return true}i++}return false};var Xe=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Qe={};var Ze={};var Ye={INDEXEDDB:K,WEBSQL:Te,LOCALSTORAGE:Ke};var et=[Ye.INDEXEDDB._driver,Ye.WEBSQL._driver,Ye.LOCALSTORAGE._driver];var tt=["dropInstance"];var rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt);var nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t){for(var r in t){if(t.hasOwnProperty(r)){if(Xe(t[r])){arguments[0][r]=t[r].slice()}else{arguments[0][r]=t[r]}}}}}return arguments[0]}var st=function(){function e(t){i(this,e);for(var r in Ye){if(Ye.hasOwnProperty(r)){var n=Ye[r];var o=n._driver;this[r]=o;if(!Qe[o]){this.defineDriver(n)}}}this._defaultConfig=ot({},nt);this._config=ot({},this._defaultConfig,t);this._driverSet=null;this._initDriver=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"]((function(){}))}e.prototype.config=function e(t){if((typeof t==="undefined"?"undefined":n(t))==="object"){if(this._ready){return new Error("Can't call config() after localforage "+"has been used.")}for(var r in t){if(r==="storeName"){t[r]=t[r].replace(/\W/g,"_")}if(r==="version"&&typeof t[r]!=="number"){return new Error("Database version must be a number.")}this._config[r]=t[r]}if("driver"in t&&t.driver){return this.setDriver(this._config.driver)}return true}else if(typeof t==="string"){return this._config[t]}else{return this._config}};e.prototype.defineDriver=function e(t,r,n){var i=new u((function(e,r){try{var n=t._driver;var i=new Error("Custom driver not compliant; see "+"https://mozilla.github.io/localForage/#definedriver");if(!t._driver){r(i);return}var o=rt.concat("_initStorage");for(var s=0,a=o.length;s<a;s++){var c=o[s];var l=!Je(tt,c);if((l||t[c])&&typeof t[c]!=="function"){r(i);return}}var d=function e(){var r=function e(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver");var r=u.reject(e);f(r,arguments[arguments.length-1]);return r}};for(var n=0,i=tt.length;n<i;n++){var o=tt[n];if(!t[o]){t[o]=r(o)}}};d();var h=function r(i){if(Qe[n]){console.info("Redefining LocalForage driver: "+n)}Qe[n]=t;Ze[n]=i;e()};if("_support"in t){if(t._support&&typeof t._support==="function"){t._support().then(h,r)}else{h(!!t._support)}}else{h(true)}}catch(e){r(e)}}));l(i,r,n);return i};e.prototype.driver=function e(){return this._driver||null};e.prototype.getDriver=function e(t,r,n){var i=Qe[t]?u.resolve(Qe[t]):u.reject(new Error("Driver not found."));l(i,r,n);return i};e.prototype.getSerializer=function e(t){var r=u.resolve(be);l(r,t);return r};e.prototype.ready=function e(t){var r=this;var n=r._driverSet.then((function(){if(r._ready===null){r._ready=r._initDriver()}return r._ready}));l(n,t,t);return n};e.prototype.setDriver=function e(t,r,n){var i=this;if(!Xe(t)){t=[t]}var o=this._getSupportedDrivers(t);function s(){i._config.driver=i.driver()}function a(e){i._extend(e);s();i._ready=i._initStorage(i._config);return i._ready}function c(e){return function(){var t=0;function r(){while(t<e.length){var n=e[t];t++;i._dbInfo=null;i._ready=null;return i.getDriver(n).then(a)["catch"](r)}s();var o=new Error("No available storage method found.");i._driverSet=u.reject(o);return i._driverSet}return r()}}var f=this._driverSet!==null?this._driverSet["catch"]((function(){return u.resolve()})):u.resolve();this._driverSet=f.then((function(){var e=o[0];i._dbInfo=null;i._ready=null;return i.getDriver(e).then((function(e){i._driver=e._driver;s();i._wrapLibraryMethodsWithReady();i._initDriver=c(o)}))}))["catch"]((function(){s();var e=new Error("No available storage method found.");i._driverSet=u.reject(e);return i._driverSet}));l(this._driverSet,r,n);return this._driverSet};e.prototype.supports=function e(t){return!!Ze[t]};e.prototype._extend=function e(t){ot(this,t)};e.prototype._getSupportedDrivers=function e(t){var r=[];for(var n=0,i=t.length;n<i;n++){var o=t[n];if(this.supports(o)){r.push(o)}}return r};e.prototype._wrapLibraryMethodsWithReady=function e(){for(var t=0,r=rt.length;t<r;t++){it(this,rt[t])}};e.prototype.createInstance=function t(r){return new e(r)};return e}();var at=new st;t.exports=at},{3:3}]},{},[4])(4)}))},880:function(e){!function(t,r){true?e.exports=r():0}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(r),s=Math.max(i,o),a=0,c=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var a=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=o.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0;t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"};t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"};t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"};t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"};t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},o=r(18);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(r=null)&&s(t.prototype,r),n&&s(t,n),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=c(r(92)),i=c(r(93)),o=c(r(94)),s=c(r(95)),a=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(r[t]=s,n+=1)})),n>0){var s=Object.keys(r),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(r[c]);if(void 0!==u)return u}var f=a.default.find(s,(function(e){return t.isPlatform(e)}));if(f){var l=this.satisfies(r[f]);if(void 0!==l)return l}}if(o>0){var d=Object.keys(i),h=a.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n};var o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18);var s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:o.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:o.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:o.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18);var s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18);var s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=s,e.exports=t.default}})}))},992:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty,n;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}function s(e){var t=/([^=?#&]+)=?([^&]*)/g,r={},n;while(n=t.exec(e)){var o=i(n[1]),s=i(n[2]);if(o===null||s===null||o in r)continue;r[o]=s}return r}function a(e,t){t=t||"";var i=[],s,a;if("string"!==typeof t)t="?";for(a in e){if(r.call(e,a)){s=e[a];if(!s&&(s===null||s===n||isNaN(s))){s=""}a=o(a);s=o(s);if(a===null||s===null)continue;i.push(a+"="+s)}}return i.length?t+i.join("&"):""}t.stringify=a;t.parse=s}};var t={};function r(n){var i=t[n];if(i!==undefined){return i.exports}var o=t[n]={exports:{}};e[n].call(o.exports,o,o.exports,r);return o.exports}(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;r.d(t,{a:t});return t}})();(()=>{r.d=(e,t)=>{for(var n in t){if(r.o(t,n)&&!r.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:t[n]})}}}})();(()=>{r.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()})();(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();var n={};(()=>{"use strict";var e=r(7);const t=()=>undefined;const n={NODE_CLIENT:false,NODE_ADMIN:false,SDK_VERSION:"${JSCORE_VERSION}"};const i=function(e,t){if(!e){throw o(t)}};const o=function(e){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};const s=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<128){t[r++]=i}else if(i<2048){t[r++]=i>>6|192;t[r++]=i&63|128}else if((i&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320){i=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023);t[r++]=i>>18|240;t[r++]=i>>12&63|128;t[r++]=i>>6&63|128;t[r++]=i&63|128}else{t[r++]=i>>12|224;t[r++]=i>>6&63|128;t[r++]=i&63|128}}return t};const a=function(e){const t=[];let r=0,n=0;while(r<e.length){const i=e[r++];if(i<128){t[n++]=String.fromCharCode(i)}else if(i>191&&i<224){const o=e[r++];t[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[r++];const s=e[r++];const a=e[r++];const c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10));t[n++]=String.fromCharCode(56320+(c&1023))}else{const o=e[r++];const s=e[r++];t[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")};const c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"abcdefghijklmnopqrstuvwxyz"+"0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray(e,t){if(!Array.isArray(e)){throw Error("encodeByteArray takes an array as a parameter")}this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_;const n=[];for(let t=0;t<e.length;t+=3){const i=e[t];const o=t+1<e.length;const s=o?e[t+1]:0;const a=t+2<e.length;const c=a?e[t+2]:0;const u=i>>2;const f=(i&3)<<4|s>>4;let l=(s&15)<<2|c>>6;let d=c&63;if(!a){d=64;if(!o){l=64}}n.push(r[u],r[f],r[l],r[d])}return n.join("")},encodeString(e,t){if(this.HAS_NATIVE_SUPPORT&&!t){return btoa(e)}return this.encodeByteArray(s(e),t)},decodeString(e,t){if(this.HAS_NATIVE_SUPPORT&&!t){return atob(e)}return a(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_;const n=[];for(let t=0;t<e.length;){const i=r[e.charAt(t++)];const o=t<e.length;const s=o?r[e.charAt(t)]:0;++t;const a=t<e.length;const c=a?r[e.charAt(t)]:64;++t;const f=t<e.length;const l=f?r[e.charAt(t)]:64;++t;if(i==null||s==null||c==null||l==null){throw new u}const d=i<<2|s>>4;n.push(d);if(c!==64){const e=s<<4&240|c>>2;n.push(e);if(l!==64){const e=c<<6&192|l;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={};this.charToByteMap_={};this.byteToCharMapWebSafe_={};this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++){this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e);this.charToByteMap_[this.byteToCharMap_[e]]=e;this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e);this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e;if(e>=this.ENCODED_VALS_BASE.length){this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e;this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e}}}}};class u extends Error{constructor(){super(...arguments);this.name="DecodeBase64StringError"}}const f=function(e){const t=s(e);return c.encodeByteArray(t,true)};const l=function(e){return f(e).replace(/\./g,"")};const d=function(e){try{return c.decodeString(e,true)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(e){return p(undefined,e)}function p(e,t){if(!(t instanceof Object)){return t}switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:if(e===undefined){e={}}break;case Array:e=[];break;default:return t}for(const r in t){if(!t.hasOwnProperty(r)||!v(r)){continue}e[r]=p(e[r],t[r])}return e}function v(e){return e!=="__proto__"}function g(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof r.g!=="undefined"){return r.g}throw new Error("Unable to locate global object.")}const b=()=>g().__FIREBASE_DEFAULTS__;const m=()=>{if(typeof process==="undefined"||typeof process.env==="undefined"){return}const e=process.env.__FIREBASE_DEFAULTS__;if(e){return JSON.parse(e)}};const w=()=>{if(typeof document==="undefined"){return}let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)};const y=()=>{try{return t()||b()||m()||w()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}};const _=e=>y()?.emulatorHosts?.[e];const S=e=>{const t=_(e);if(!t){return undefined}const r=t.lastIndexOf(":");if(r<=0||r+1===t.length){throw new Error(`Invalid host ${t} with no separate hostname and port!`)}const n=parseInt(t.substring(r+1),10);if(t[0]==="["){return[t.substring(1,r-1),n]}else{return[t.substring(0,r),n]}};const k=()=>y()?.config;const I=e=>y()?.[`_${e}`];class C{constructor(){this.reject=()=>{};this.resolve=()=>{};this.promise=new Promise(((e,t)=>{this.resolve=e;this.reject=t}))}wrapCallback(e){return(t,r)=>{if(t){this.reject(t)}else{this.resolve(r)}if(typeof e==="function"){this.promise.catch((()=>{}));if(e.length===1){e(t)}else{e(t,r)}}}}}function E(e){try{const t=e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e;return t.endsWith(".cloudworkstations.dev")}catch{return false}}async function P(e){const t=await fetch(e,{credentials:"include"});return t.ok}function O(e,t){if(e.uid){throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.')}const r={alg:"none",type:"JWT"};const n=t||"demo-project";const i=e.iat||0;const o=e.sub||e.user_id;if(!o){throw new Error("mockUserToken must contain 'sub' or 'user_id' field!")}const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...e};const a="";return[l(JSON.stringify(r)),l(JSON.stringify(s)),a].join(".")}const M={};function A(){const e={prod:[],emulator:[]};for(const t of Object.keys(M)){if(M[t]){e.emulator.push(t)}else{e.prod.push(t)}}return e}function N(e){let t=document.getElementById(e);let r=false;if(!t){t=document.createElement("div");t.setAttribute("id",e);r=true}return{created:r,element:t}}let T=false;function x(e,t){if(typeof window==="undefined"||typeof document==="undefined"||!E(window.location.host)||M[e]===t||M[e]||T){return}M[e]=t;function r(e){return`__firebase__banner__${e}`}const n="__firebase__banner";const i=A();const o=i.prod.length>0;function s(){const e=document.getElementById(n);if(e){e.remove()}}function a(e){e.style.display="flex";e.style.background="#7faaf0";e.style.position="fixed";e.style.bottom="5px";e.style.left="5px";e.style.padding=".5em";e.style.borderRadius="5px";e.style.alignItems="center"}function c(e,t){e.setAttribute("width","24");e.setAttribute("id",t);e.setAttribute("height","24");e.setAttribute("viewBox","0 0 24 24");e.setAttribute("fill","none");e.style.marginLeft="-6px"}function u(){const e=document.createElement("span");e.style.cursor="pointer";e.style.marginLeft="16px";e.style.fontSize="24px";e.innerHTML=" &times;";e.onclick=()=>{T=true;s()};return e}function f(e,t){e.setAttribute("id",t);e.innerText="Learn more";e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend";e.setAttribute("target","__blank");e.style.paddingLeft="5px";e.style.textDecoration="underline"}function l(){const e=N(n);const t=r("text");const i=document.getElementById(t)||document.createElement("span");const s=r("learnmore");const l=document.getElementById(s)||document.createElement("a");const d=r("preprendIcon");const h=document.getElementById(d)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;a(t);f(l,s);const r=u();c(h,d);t.append(h,i,l,r);document.body.appendChild(t)}if(o){i.innerText=`Preview backend disconnected.`;h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>`}else{h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>`;i.innerText="Preview backend running in this workspace."}i.setAttribute("id",t)}if(document.readyState==="loading"){window.addEventListener("DOMContentLoaded",l)}else{l()}}function D(){if(typeof navigator!=="undefined"&&typeof navigator["userAgent"]==="string"){return navigator["userAgent"]}else{return""}}function R(){return typeof window!=="undefined"&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())}function F(){const e=y()?.forceEnvironment;if(e==="node"){return true}else if(e==="browser"){return false}try{return Object.prototype.toString.call(r.g.process)==="[object process]"}catch(e){return false}}function L(){return typeof window!=="undefined"||j()}function j(){return typeof WorkerGlobalScope!=="undefined"&&typeof self!=="undefined"&&self instanceof WorkerGlobalScope}function B(){return typeof navigator!=="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function W(){const e=typeof chrome==="object"?chrome.runtime:typeof browser==="object"?browser.runtime:undefined;return typeof e==="object"&&e.id!==undefined}function z(){return typeof navigator==="object"&&navigator["product"]==="ReactNative"}function U(){return D().indexOf("Electron/")>=0}function H(){const e=D();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function V(){return D().indexOf("MSAppHost/")>=0}function $(){return n.NODE_CLIENT===true||n.NODE_ADMIN===true}function q(){return!F()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return!F()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function G(){try{return typeof indexedDB==="object"}catch(e){return false}}function J(){return new Promise(((e,t)=>{try{let r=true;const n="validate-browser-context-for-indexeddb-analytics-module";const i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close();if(!r){self.indexedDB.deleteDatabase(n)}e(true)};i.onupgradeneeded=()=>{r=false};i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}}))}function X(){if(typeof navigator==="undefined"||!navigator.cookieEnabled){return false}return true}const Q="FirebaseError";class Z extends Error{constructor(e,t,r){super(t);this.code=e;this.customData=r;this.name=Q;Object.setPrototypeOf(this,Z.prototype);if(Error.captureStackTrace){Error.captureStackTrace(this,Y.prototype.create)}}}class Y{constructor(e,t,r){this.service=e;this.serviceName=t;this.errors=r}create(e,...t){const r=t[0]||{};const n=`${this.service}/${e}`;const i=this.errors[e];const o=i?ee(i,r):"Error";const s=`${this.serviceName}: ${o} (${n}).`;const a=new Z(n,s,r);return a}}function ee(e,t){return e.replace(te,((e,r)=>{const n=t[r];return n!=null?String(n):`<${r}?>`}))}const te=/\{\$([^}]+)}/g;function re(e){return JSON.parse(e)}function ne(e){return JSON.stringify(e)}const ie=function(e){let t={},r={},n={},i="";try{const o=e.split(".");t=re(d(o[0])||"");r=re(d(o[1])||"");i=o[2];n=r["d"]||{};delete r["d"]}catch(e){}return{header:t,claims:r,data:n,signature:i}};const oe=function(e){const t=ie(e).claims;const r=Math.floor((new Date).getTime()/1e3);let n=0,i=0;if(typeof t==="object"){if(t.hasOwnProperty("nbf")){n=t["nbf"]}else if(t.hasOwnProperty("iat")){n=t["iat"]}if(t.hasOwnProperty("exp")){i=t["exp"]}else{i=n+86400}}return!!r&&!!n&&!!i&&r>=n&&r<=i};const se=function(e){const t=ie(e).claims;if(typeof t==="object"&&t.hasOwnProperty("iat")){return t["iat"]}return null};const ae=function(e){const t=ie(e),r=t.claims;return!!r&&typeof r==="object"&&r.hasOwnProperty("iat")};const ce=function(e){const t=ie(e).claims;return typeof t==="object"&&t["admin"]===true};function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fe(e,t){if(Object.prototype.hasOwnProperty.call(e,t)){return e[t]}else{return undefined}}function le(e){for(const t in e){if(Object.prototype.hasOwnProperty.call(e,t)){return false}}return true}function de(e,t,r){const n={};for(const i in e){if(Object.prototype.hasOwnProperty.call(e,i)){n[i]=t.call(r,e[i],i,e)}}return n}function he(e,t){if(e===t){return true}const r=Object.keys(e);const n=Object.keys(t);for(const i of r){if(!n.includes(i)){return false}const r=e[i];const o=t[i];if(pe(r)&&pe(o)){if(!he(r,o)){return false}}else if(r!==o){return false}}for(const e of n){if(!r.includes(e)){return false}}return true}function pe(e){return e!==null&&typeof e==="object"}function ve(e,t=2e3){const r=new C;setTimeout((()=>r.reject("timeout!")),t);e.then(r.resolve,r.reject);return r.promise}function ge(e){const t=[];for(const[r,n]of Object.entries(e)){if(Array.isArray(n)){n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}))}else{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}}return t.length?"&"+t.join("&"):""}function be(e){const t={};const r=e.replace(/^\?/,"").split("&");r.forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}));return t}function me(e){const t=e.indexOf("?");if(!t){return""}const r=e.indexOf("#",t);return e.substring(t,r>0?r:undefined)}class we{constructor(){this.chain_=[];this.buf_=[];this.W_=[];this.pad_=[];this.inbuf_=0;this.total_=0;this.blockSize=512/8;this.pad_[0]=128;for(let e=1;e<this.blockSize;++e){this.pad_[e]=0}this.reset()}reset(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.chain_[4]=3285377520;this.inbuf_=0;this.total_=0}compress_(e,t){if(!t){t=0}const r=this.W_;if(typeof e==="string"){for(let n=0;n<16;n++){r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3);t+=4}}else{for(let n=0;n<16;n++){r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];t+=4}}for(let e=16;e<80;e++){const t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=(t<<1|t>>>31)&4294967295}let n=this.chain_[0];let i=this.chain_[1];let o=this.chain_[2];let s=this.chain_[3];let a=this.chain_[4];let c,u;for(let e=0;e<80;e++){if(e<40){if(e<20){c=s^i&(o^s);u=1518500249}else{c=i^o^s;u=1859775393}}else{if(e<60){c=i&o|s&(i|o);u=2400959708}else{c=i^o^s;u=3395469782}}const t=(n<<5|n>>>27)+c+a+u+r[e]&4294967295;a=s;s=o;o=(i<<30|i>>>2)&4294967295;i=n;n=t}this.chain_[0]=this.chain_[0]+n&4294967295;this.chain_[1]=this.chain_[1]+i&4294967295;this.chain_[2]=this.chain_[2]+o&4294967295;this.chain_[3]=this.chain_[3]+s&4294967295;this.chain_[4]=this.chain_[4]+a&4294967295}update(e,t){if(e==null){return}if(t===undefined){t=e.length}const r=t-this.blockSize;let n=0;const i=this.buf_;let o=this.inbuf_;while(n<t){if(o===0){while(n<=r){this.compress_(e,n);n+=this.blockSize}}if(typeof e==="string"){while(n<t){i[o]=e.charCodeAt(n);++o;++n;if(o===this.blockSize){this.compress_(i);o=0;break}}}else{while(n<t){i[o]=e[n];++o;++n;if(o===this.blockSize){this.compress_(i);o=0;break}}}}this.inbuf_=o;this.total_+=t}digest(){const e=[];let t=this.total_*8;if(this.inbuf_<56){this.update(this.pad_,56-this.inbuf_)}else{this.update(this.pad_,this.blockSize-(this.inbuf_-56))}for(let e=this.blockSize-1;e>=56;e--){this.buf_[e]=t&255;t/=256}this.compress_(this.buf_);let r=0;for(let t=0;t<5;t++){for(let n=24;n>=0;n-=8){e[r]=this.chain_[t]>>n&255;++r}}return e}}function ye(e,t){const r=new _e(e,t);return r.subscribe.bind(r)}class _e{constructor(e,t){this.observers=[];this.unsubscribes=[];this.observerCount=0;this.task=Promise.resolve();this.finalized=false;this.onNoObservers=t;this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)}));this.close(e)}complete(){this.forEachObserver((e=>{e.complete()}));this.close()}subscribe(e,t,r){let n;if(e===undefined&&t===undefined&&r===undefined){throw new Error("Missing Observer.")}if(ke(e,["next","error","complete"])){n=e}else{n={next:e,error:t,complete:r}}if(n.next===undefined){n.next=Ie}if(n.error===undefined){n.error=Ie}if(n.complete===undefined){n.complete=Ie}const i=this.unsubscribeOne.bind(this,this.observers.length);if(this.finalized){this.task.then((()=>{try{if(this.finalError){n.error(this.finalError)}else{n.complete()}}catch(e){}return}))}this.observers.push(n);return i}unsubscribeOne(e){if(this.observers===undefined||this.observers[e]===undefined){return}delete this.observers[e];this.observerCount-=1;if(this.observerCount===0&&this.onNoObservers!==undefined){this.onNoObservers(this)}}forEachObserver(e){if(this.finalized){return}for(let t=0;t<this.observers.length;t++){this.sendOne(t,e)}}sendOne(e,t){this.task.then((()=>{if(this.observers!==undefined&&this.observers[e]!==undefined){try{t(this.observers[e])}catch(e){if(typeof console!=="undefined"&&console.error){console.error(e)}}}}))}close(e){if(this.finalized){return}this.finalized=true;if(e!==undefined){this.finalError=e}this.task.then((()=>{this.observers=undefined;this.onNoObservers=undefined}))}}function Se(e,t){return(...r)=>{Promise.resolve(true).then((()=>{e(...r)})).catch((e=>{if(t){t(e)}}))}}function ke(e,t){if(typeof e!=="object"||e===null){return false}for(const r of t){if(r in e&&typeof e[r]==="function"){return true}}return false}function Ie(){}const Ce=function(e,t,r,n){let i;if(n<t){i="at least "+t}else if(n>r){i=r===0?"none":"no more than "+r}if(i){const t=e+" failed: Was called with "+n+(n===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(t)}};function Ee(e,t){return`${e} failed: ${t} argument `}function Pe(e,t,r){if(r&&!t){return}if(typeof t!=="string"){throw new Error(Ee(e,"namespace")+"must be a valid firebase namespace.")}}function Oe(e,t,r,n){if(n&&!r){return}if(typeof r!=="function"){throw new Error(Ee(e,t)+"must be a valid function.")}}function Me(e,t,r,n){if(n&&!r){return}if(typeof r!=="object"||r===null){throw new Error(Ee(e,t)+"must be a valid context object.")}}const Ae=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);if(o>=55296&&o<=56319){const t=o-55296;n++;i(n<e.length,"Surrogate pair missing trail surrogate.");const r=e.charCodeAt(n)-56320;o=65536+(t<<10)+r}if(o<128){t[r++]=o}else if(o<2048){t[r++]=o>>6|192;t[r++]=o&63|128}else if(o<65536){t[r++]=o>>12|224;t[r++]=o>>6&63|128;t[r++]=o&63|128}else{t[r++]=o>>18|240;t[r++]=o>>12&63|128;t[r++]=o>>6&63|128;t[r++]=o&63|128}}return t};const Ne=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(n<128){t++}else if(n<2048){t+=2}else if(n>=55296&&n<=56319){t+=4;r++}else{t+=3}}return t};const Te=1e3;const xe=2;const De=null&&4*60*60*1e3;const Re=.5;function Fe(e,t=Te,r=xe){const n=t*Math.pow(r,e);const i=Math.round(Re*n*(Math.random()-.5)*2);return Math.min(De,n+i)}function Le(e){if(!Number.isFinite(e)){return`${e}`}return e+je(e)}function je(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20){return"th"}const r=e%10;if(r===1){return"st"}if(r===2){return"nd"}if(r===3){return"rd"}return"th"}function Be(e){if(e&&e._delegate){return e._delegate}else{return e}}class We{constructor(e,t,r){this.name=e;this.instanceFactory=t;this.type=r;this.multipleInstances=false;this.serviceProps={};this.instantiationMode="LAZY";this.onInstanceCreated=null}setInstantiationMode(e){this.instantiationMode=e;return this}setMultipleInstances(e){this.multipleInstances=e;return this}setServiceProps(e){this.serviceProps=e;return this}setInstanceCreatedCallback(e){this.onInstanceCreated=e;return this}}const ze="[DEFAULT]";class Ue{constructor(e,t){this.name=e;this.container=t;this.component=null;this.instances=new Map;this.instancesDeferred=new Map;this.instancesOptions=new Map;this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new C;this.instancesDeferred.set(t,e);if(this.isInitialized(t)||this.shouldAutoInitialize()){try{const r=this.getOrInitializeService({instanceIdentifier:t});if(r){e.resolve(r)}}catch(e){}}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier);const r=e?.optional??false;if(this.isInitialized(t)||this.shouldAutoInitialize()){try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(r){return null}else{throw e}}}else{if(r){return null}else{throw Error(`Service ${this.name} is not available`)}}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name){throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`)}if(this.component){throw Error(`Component for ${this.name} has already been provided`)}this.component=e;if(!this.shouldAutoInitialize()){return}if(Ve(e)){try{this.getOrInitializeService({instanceIdentifier:ze})}catch(e){}}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}clearInstance(e=ze){this.instancesDeferred.delete(e);this.instancesOptions.delete(e);this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return this.component!=null}isInitialized(e=ze){return this.instances.has(e)}getOptions(e=ze){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e;const r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r)){throw Error(`${this.name}(${r}) has already been initialized`)}if(!this.isComponentSet()){throw Error(`Component ${this.name} has not been registered yet`)}const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);if(r===i){t.resolve(n)}}return n}onInit(e,t){const r=this.normalizeInstanceIdentifier(t);const n=this.onInitCallbacks.get(r)??new Set;n.add(e);this.onInitCallbacks.set(r,n);const i=this.instances.get(r);if(i){e(i,r)}return()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(!r){return}for(const n of r){try{n(e,t)}catch{}}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component){r=this.component.instanceFactory(this.container,{instanceIdentifier:He(e),options:t});this.instances.set(e,r);this.instancesOptions.set(e,t);this.invokeOnInitCallbacks(r,e);if(this.component.onInstanceCreated){try{this.component.onInstanceCreated(this.container,e,r)}catch{}}}return r||null}normalizeInstanceIdentifier(e=ze){if(this.component){return this.component.multipleInstances?e:ze}else{return e}}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function He(e){return e===ze?undefined:e}function Ve(e){return e.instantiationMode==="EAGER"}class $e{constructor(e){this.name=e;this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet()){throw new Error(`Component ${e.name} has already been registered with ${this.name}`)}t.setComponent(e)}addOrOverwriteComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet()){this.providers.delete(e.name)}this.addComponent(e)}getProvider(e){if(this.providers.has(e)){return this.providers.get(e)}const t=new Ue(e,this);this.providers.set(e,t);return t}getProviders(){return Array.from(this.providers.values())}}const qe=[];var Ke;(function(e){e[e["DEBUG"]=0]="DEBUG";e[e["VERBOSE"]=1]="VERBOSE";e[e["INFO"]=2]="INFO";e[e["WARN"]=3]="WARN";e[e["ERROR"]=4]="ERROR";e[e["SILENT"]=5]="SILENT"})(Ke||(Ke={}));const Ge={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT};const Je=Ke.INFO;const Xe={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"};const Qe=(e,t,...r)=>{if(t<e.logLevel){return}const n=(new Date).toISOString();const i=Xe[t];if(i){console[i](`[${n}]  ${e.name}:`,...r)}else{throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)}};class Ze{constructor(e){this.name=e;this._logLevel=Je;this._logHandler=Qe;this._userLogHandler=null;qe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke)){throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``)}this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==="string"?Ge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=="function"){throw new TypeError("Value assigned to `logHandler` must be a function")}this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e);this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e);this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e);this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e);this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e);this._logHandler(this,Ke.ERROR,...e)}}function Ye(e){qe.forEach((t=>{t.setLogLevel(e)}))}function et(e,t){for(const r of qe){let n=null;if(t&&t.level){n=Ge[t.level]}if(e===null){r.userLogHandler=null}else{r.userLogHandler=(t,r,...i)=>{const o=i.map((e=>{if(e==null){return null}else if(typeof e==="string"){return e}else if(typeof e==="number"||typeof e==="boolean"){return e.toString()}else if(e instanceof Error){return e.message}else{try{return JSON.stringify(e)}catch(e){return null}}})).filter((e=>e)).join(" ");if(r>=(n??t.logLevel)){e({level:Ke[r].toLowerCase(),message:o,args:i,type:t.name})}}}}}const tt=(e,t)=>t.some((t=>e instanceof t));let rt;let nt;function it(){return rt||(rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ot(){return nt||(nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const st=new WeakMap;const at=new WeakMap;const ct=new WeakMap;const ut=new WeakMap;const ft=new WeakMap;function lt(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i);e.removeEventListener("error",o)};const i=()=>{t(bt(e.result));n()};const o=()=>{r(e.error);n()};e.addEventListener("success",i);e.addEventListener("error",o)}));t.then((t=>{if(t instanceof IDBCursor){st.set(t,e)}})).catch((()=>{}));ft.set(t,e);return t}function dt(e){if(at.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i);e.removeEventListener("error",o);e.removeEventListener("abort",o)};const i=()=>{t();n()};const o=()=>{r(e.error||new DOMException("AbortError","AbortError"));n()};e.addEventListener("complete",i);e.addEventListener("error",o);e.addEventListener("abort",o)}));at.set(e,t)}let ht={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return at.get(e);if(t==="objectStoreNames"){return e.objectStoreNames||ct.get(e)}if(t==="store"){return r.objectStoreNames[1]?undefined:r.objectStore(r.objectStoreNames[0])}}return bt(e[t])},set(e,t,r){e[t]=r;return true},has(e,t){if(e instanceof IDBTransaction&&(t==="done"||t==="store")){return true}return t in e}};function pt(e){ht=e(ht)}function vt(e){if(e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)){return function(t,...r){const n=e.call(mt(this),t,...r);ct.set(n,t.sort?t.sort():[t]);return bt(n)}}if(ot().includes(e)){return function(...t){e.apply(mt(this),t);return bt(st.get(this))}}return function(...t){return bt(e.apply(mt(this),t))}}function gt(e){if(typeof e==="function")return vt(e);if(e instanceof IDBTransaction)dt(e);if(tt(e,it()))return new Proxy(e,ht);return e}function bt(e){if(e instanceof IDBRequest)return lt(e);if(ut.has(e))return ut.get(e);const t=gt(e);if(t!==e){ut.set(e,t);ft.set(t,e)}return t}const mt=e=>ft.get(e);function wt(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t);const a=bt(s);if(n){s.addEventListener("upgradeneeded",(e=>{n(bt(s.result),e.oldVersion,e.newVersion,bt(s.transaction),e)}))}if(r){s.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e)))}a.then((e=>{if(o)e.addEventListener("close",(()=>o()));if(i){e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))}})).catch((()=>{}));return a}function yt(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);if(t){r.addEventListener("blocked",(e=>t(e.oldVersion,e)))}return bt(r).then((()=>undefined))}const _t=["get","getKey","getAll","getAllKeys","count"];const St=["put","add","delete","clear"];const kt=new Map;function It(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==="string")){return}if(kt.get(t))return kt.get(t);const r=t.replace(/FromIndex$/,"");const n=t!==r;const i=St.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||_t.includes(r))){return}const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;if(n)s=s.index(t.shift());return(await Promise.all([s[r](...t),i&&o.done]))[0]};kt.set(t,o);return o}pt((e=>({...e,get:(t,r,n)=>It(t,r)||e.get(t,r,n),has:(t,r)=>!!It(t,r)||e.has(t,r)})));class Ct{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map((e=>{if(Et(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else{return null}})).filter((e=>e)).join(" ")}}function Et(e){const t=e.getComponent();return t?.type==="VERSION"}const Pt="@firebase/app";const Ot="0.14.5";const Mt=new Ze("@firebase/app");const At="@firebase/app-compat";const Nt="@firebase/analytics-compat";const Tt="@firebase/analytics";const xt="@firebase/app-check-compat";const Dt="@firebase/app-check";const Rt="@firebase/auth";const Ft="@firebase/auth-compat";const Lt="@firebase/database";const jt="@firebase/data-connect";const Bt="@firebase/database-compat";const Wt="@firebase/functions";const zt="@firebase/functions-compat";const Ut="@firebase/installations";const Ht="@firebase/installations-compat";const Vt="@firebase/messaging";const $t="@firebase/messaging-compat";const qt="@firebase/performance";const Kt="@firebase/performance-compat";const Gt="@firebase/remote-config";const Jt="@firebase/remote-config-compat";const Xt="@firebase/storage";const Qt="@firebase/storage-compat";const Zt="@firebase/firestore";const Yt="@firebase/ai";const er="@firebase/firestore-compat";const tr="firebase";const rr="12.5.0";const nr="[DEFAULT]";const ir={[Pt]:"fire-core",[At]:"fire-core-compat",[Tt]:"fire-analytics",[Nt]:"fire-analytics-compat",[Dt]:"fire-app-check",[xt]:"fire-app-check-compat",[Rt]:"fire-auth",[Ft]:"fire-auth-compat",[Lt]:"fire-rtdb",[jt]:"fire-data-connect",[Bt]:"fire-rtdb-compat",[Wt]:"fire-fn",[zt]:"fire-fn-compat",[Ut]:"fire-iid",[Ht]:"fire-iid-compat",[Vt]:"fire-fcm",[$t]:"fire-fcm-compat",[qt]:"fire-perf",[Kt]:"fire-perf-compat",[Gt]:"fire-rc",[Jt]:"fire-rc-compat",[Xt]:"fire-gcs",[Qt]:"fire-gcs-compat",[Zt]:"fire-fst",[er]:"fire-fst-compat",[Yt]:"fire-vertex","fire-js":"fire-js",[tr]:"fire-js-all"};const or=new Map;const sr=new Map;const ar=new Map;function cr(e,t){try{e.container.addComponent(t)}catch(r){Mt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function ur(e,t){e.container.addOrOverwriteComponent(t)}function fr(e){const t=e.name;if(ar.has(t)){Mt.debug(`There were multiple attempts to register component ${t}.`);return false}ar.set(t,e);for(const t of or.values()){cr(t,e)}for(const t of sr.values()){cr(t,e)}return true}function lr(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:true});if(r){void r.triggerHeartbeat()}return e.container.getProvider(t)}function dr(e,t,r=nr){lr(e,t).clearInstance(r)}function hr(e){return e.options!==undefined}function pr(e){if(hr(e)){return false}return"authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e}function vr(e){if(e===null||e===undefined){return false}return e.settings!==undefined}function gr(){ar.clear()}const br={["no-app"]:"No Firebase App '{$appName}' has been created - "+"call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a "+"Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."};const mr=new Y("app","Firebase",br);class wr{constructor(e,t,r){this._isDeleted=false;this._options={...e};this._config={...t};this._name=t.name;this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled;this._container=r;this.container.addComponent(new We("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){this.checkDestroyed();return this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed();this._automaticDataCollectionEnabled=e}get name(){this.checkDestroyed();return this._name}get options(){this.checkDestroyed();return this._options}get config(){this.checkDestroyed();return this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted){throw mr.create("app-deleted",{appName:this._name})}}}function yr(e,t){const r=d(e.split(".")[1]);if(r===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}const n=JSON.parse(r).exp;if(n===undefined){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(r).exp*1e3;const o=(new Date).getTime();const s=i-o;if(s<=0){console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}}class _r extends wr{constructor(e,t,r,n){const i=t.automaticDataCollectionEnabled!==undefined?t.automaticDataCollectionEnabled:true;const o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==undefined){super(e,o,n)}else{const t=e;super(t.options,o,n)}this._serverConfig={automaticDataCollectionEnabled:i,...t};if(this._serverConfig.authIdToken){yr(this._serverConfig.authIdToken,"authIdToken")}if(this._serverConfig.appCheckToken){yr(this._serverConfig.appCheckToken,"appCheckToken")}this._finalizationRegistry=null;if(typeof FinalizationRegistry!=="undefined"){this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))}this._refCount=0;this.incRefCount(this._serverConfig.releaseOnDeref);this._serverConfig.releaseOnDeref=undefined;t.releaseOnDeref=undefined;Or(Pt,Ot,"serverapp")}toJSON(){return undefined}get refCount(){return this._refCount}incRefCount(e){if(this.isDeleted){return}this._refCount++;if(e!==undefined&&this._finalizationRegistry!==null){this._finalizationRegistry.register(e,this)}}decRefCount(){if(this.isDeleted){return 0}return--this._refCount}automaticCleanup(){void Pr(this)}get settings(){this.checkDestroyed();return this._serverConfig}checkDestroyed(){if(this.isDeleted){throw mr.create("server-app-deleted")}}}const Sr=null&&rr;function kr(e,t={}){let r=e;if(typeof t!=="object"){const e=t;t={name:e}}const n={name:nr,automaticDataCollectionEnabled:true,...t};const i=n.name;if(typeof i!=="string"||!i){throw mr.create("bad-app-name",{appName:String(i)})}r||(r=k());if(!r){throw mr.create("no-options")}const o=or.get(i);if(o){if(he(r,o.options)&&he(n,o.config)){return o}else{throw mr.create("duplicate-app",{appName:i})}}const s=new $e(i);for(const e of ar.values()){s.addComponent(e)}const a=new wr(r,n,s);or.set(i,a);return a}function Ir(e,t={}){if(isBrowser()&&!isWebWorker()){throw mr.create("invalid-server-app-environment")}let r;let n=t||{};if(e){if(hr(e)){r=e.options}else if(pr(e)){n=e}else{r=e}}if(n.automaticDataCollectionEnabled===undefined){n.automaticDataCollectionEnabled=true}r||(r=getDefaultAppConfig());if(!r){throw mr.create("no-options")}const i={...n,...r};if(i.releaseOnDeref!==undefined){delete i.releaseOnDeref}const o=e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0);if(n.releaseOnDeref!==undefined){if(typeof FinalizationRegistry==="undefined"){throw mr.create("finalization-registry-not-supported",{})}}const s=""+o(JSON.stringify(i));const a=sr.get(s);if(a){a.incRefCount(n.releaseOnDeref);return a}const c=new ComponentContainer(s);for(const e of ar.values()){c.addComponent(e)}const u=new _r(r,n,s,c);sr.set(s,u);return u}function Cr(e=nr){const t=or.get(e);if(!t&&e===nr&&k()){return kr()}if(!t){throw mr.create("no-app",{appName:e})}return t}function Er(){return Array.from(or.values())}async function Pr(e){let t=false;const r=e.name;if(or.has(r)){t=true;or.delete(r)}else if(sr.has(r)){const n=e;if(n.decRefCount()<=0){sr.delete(r);t=true}}if(t){await Promise.all(e.container.getProviders().map((e=>e.delete())));e.isDeleted=true}}function Or(e,t,r){let n=ir[e]??e;if(r){n+=`-${r}`}const i=n.match(/\s|\//);const o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${n}" with version "${t}":`];if(i){e.push(`library name "${n}" contains illegal characters (whitespace or "/")`)}if(i&&o){e.push("and")}if(o){e.push(`version name "${t}" contains illegal characters (whitespace or "/")`)}Mt.warn(e.join(" "));return}fr(new We(`${n}-version`,(()=>({library:n,version:t})),"VERSION"))}function Mr(e,t){if(e!==null&&typeof e!=="function"){throw mr.create("invalid-log-argument")}setUserLogHandler(e,t)}function Ar(e){setLogLevel$1(e)}const Nr="firebase-heartbeat-database";const Tr=1;const xr="firebase-heartbeat-store";let Dr=null;function Rr(){if(!Dr){Dr=wt(Nr,Tr,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xr)}catch(e){console.warn(e)}}}}).catch((e=>{throw mr.create("idb-open",{originalErrorMessage:e.message})}))}return Dr}async function Fr(e){try{const t=await Rr();const r=t.transaction(xr);const n=await r.objectStore(xr).get(jr(e));await r.done;return n}catch(e){if(e instanceof Z){Mt.warn(e.message)}else{const t=mr.create("idb-get",{originalErrorMessage:e?.message});Mt.warn(t.message)}}}async function Lr(e,t){try{const r=await Rr();const n=r.transaction(xr,"readwrite");const i=n.objectStore(xr);await i.put(t,jr(e));await n.done}catch(e){if(e instanceof Z){Mt.warn(e.message)}else{const t=mr.create("idb-set",{originalErrorMessage:e?.message});Mt.warn(t.message)}}}function jr(e){return`${e.name}!${e.options.appId}`}const Br=1024;const Wr=30;class zr{constructor(e){this.container=e;this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vr(t);this._heartbeatsCachePromise=this._storage.read().then((e=>{this._heartbeatsCache=e;return e}))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate();const t=e.getPlatformInfoString();const r=Ur();if(this._heartbeatsCache?.heartbeats==null){this._heartbeatsCache=await this._heartbeatsCachePromise;if(this._heartbeatsCache?.heartbeats==null){return}}if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r))){return}else{this._heartbeatsCache.heartbeats.push({date:r,agent:t});if(this._heartbeatsCache.heartbeats.length>Wr){const e=qr(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null){await this._heartbeatsCachePromise}if(this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0){return""}const e=Ur();const{heartbeatsToSend:t,unsentEntries:r}=Hr(this._heartbeatsCache.heartbeats);const n=l(JSON.stringify({version:2,heartbeats:t}));this._heartbeatsCache.lastSentHeartbeatDate=e;if(r.length>0){this._heartbeatsCache.heartbeats=r;await this._storage.overwrite(this._heartbeatsCache)}else{this._heartbeatsCache.heartbeats=[];void this._storage.overwrite(this._heartbeatsCache)}return n}catch(e){Mt.warn(e);return""}}}function Ur(){const e=new Date;return e.toISOString().substring(0,10)}function Hr(e,t=Br){const r=[];let n=e.slice();for(const i of e){const e=r.find((e=>e.agent===i.agent));if(!e){r.push({agent:i.agent,dates:[i.date]});if($r(r)>t){r.pop();break}}else{e.dates.push(i.date);if($r(r)>t){e.dates.pop();break}}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Vr{constructor(e){this.app=e;this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){if(!G()){return false}else{return J().then((()=>true)).catch((()=>false))}}async read(){const e=await this._canUseIndexedDBPromise;if(!e){return{heartbeats:[]}}else{const e=await Fr(this.app);if(e?.heartbeats){return e}else{return{heartbeats:[]}}}}async overwrite(e){const t=await this._canUseIndexedDBPromise;if(!t){return}else{const t=await this.read();return Lr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){const t=await this._canUseIndexedDBPromise;if(!t){return}else{const t=await this.read();return Lr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function $r(e){return l(JSON.stringify({version:2,heartbeats:e})).length}function qr(e){if(e.length===0){return-1}let t=0;let r=e[0].date;for(let n=1;n<e.length;n++){if(e[n].date<r){r=e[n].date;t=n}}return t}function Kr(e){fr(new We("platform-logger",(e=>new Ct(e)),"PRIVATE"));fr(new We("heartbeat",(e=>new zr(e)),"PRIVATE"));Or(Pt,Ot,e);Or(Pt,Ot,"esm2020");Or("fire-js","")}Kr("");const Gr="@firebase/installations";const Jr="0.6.19";const Xr=1e4;const Qr=`w:${Jr}`;const Zr="FIS_v2";const Yr="https://firebaseinstallations.googleapis.com/v1";const en=60*60*1e3;const tn="installations";const rn="Installations";const nn={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."};const on=new Y(tn,rn,nn);function sn(e){return e instanceof Z&&e.code.includes("request-failed")}function an({projectId:e}){return`${Yr}/projects/${e}/installations`}function cn(e){return{token:e.token,requestStatus:2,expiresIn:hn(e.expiresIn),creationTime:Date.now()}}async function un(e,t){const r=await t.json();const n=r.error;return on.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function fn({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ln(e,{refreshToken:t}){const r=fn(e);r.append("Authorization",pn(t));return r}async function dn(e){const t=await e();if(t.status>=500&&t.status<600){return e()}return t}function hn(e){return Number(e.replace("s","000"))}function pn(e){return`${Zr} ${e}`}async function vn({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=an(e);const i=fn(e);const o=t.getImmediate({optional:true});if(o){const e=await o.getHeartbeatsHeader();if(e){i.append("x-firebase-client",e)}}const s={fid:r,authVersion:Zr,appId:e.appId,sdkVersion:Qr};const a={method:"POST",headers:i,body:JSON.stringify(s)};const c=await dn((()=>fetch(n,a)));if(c.ok){const e=await c.json();const t={fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:cn(e.authToken)};return t}else{throw await un("Create Installation",c)}}function gn(e){return new Promise((t=>{setTimeout(t,e)}))}function bn(e){const t=btoa(String.fromCharCode(...e));return t.replace(/\+/g,"-").replace(/\//g,"_")}const mn=/^[cdef][\w-]{21}$/;const wn="";function yn(){try{const e=new Uint8Array(17);const t=self.crypto||self.msCrypto;t.getRandomValues(e);e[0]=112+e[0]%16;const r=_n(e);return mn.test(r)?r:wn}catch{return wn}}function _n(e){const t=bn(e);return t.substr(0,22)}function Sn(e){return`${e.appName}!${e.appId}`}const kn=new Map;function In(e,t){const r=Sn(e);Pn(r,t);On(r,t)}function Cn(e,t){An();const r=Sn(e);let n=kn.get(r);if(!n){n=new Set;kn.set(r,n)}n.add(t)}function En(e,t){const r=Sn(e);const n=kn.get(r);if(!n){return}n.delete(t);if(n.size===0){kn.delete(r)}Nn()}function Pn(e,t){const r=kn.get(e);if(!r){return}for(const e of r){e(t)}}function On(e,t){const r=An();if(r){r.postMessage({key:e,fid:t})}Nn()}let Mn=null;function An(){if(!Mn&&"BroadcastChannel"in self){Mn=new BroadcastChannel("[Firebase] FID Change");Mn.onmessage=e=>{Pn(e.data.key,e.data.fid)}}return Mn}function Nn(){if(kn.size===0&&Mn){Mn.close();Mn=null}}const Tn="firebase-installations-database";const xn=1;const Dn="firebase-installations-store";let Rn=null;function Fn(){if(!Rn){Rn=wt(Tn,xn,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Dn)}}})}return Rn}async function Ln(e,t){const r=Sn(e);const n=await Fn();const i=n.transaction(Dn,"readwrite");const o=i.objectStore(Dn);const s=await o.get(r);await o.put(t,r);await i.done;if(!s||s.fid!==t.fid){In(e,t.fid)}return t}async function jn(e){const t=Sn(e);const r=await Fn();const n=r.transaction(Dn,"readwrite");await n.objectStore(Dn).delete(t);await n.done}async function Bn(e,t){const r=Sn(e);const n=await Fn();const i=n.transaction(Dn,"readwrite");const o=i.objectStore(Dn);const s=await o.get(r);const a=t(s);if(a===undefined){await o.delete(r)}else{await o.put(a,r)}await i.done;if(a&&(!s||s.fid!==a.fid)){In(e,a.fid)}return a}async function Wn(e){let t;const r=await Bn(e.appConfig,(r=>{const n=zn(r);const i=Un(e,n);t=i.registrationPromise;return i.installationEntry}));if(r.fid===wn){return{installationEntry:await t}}return{installationEntry:r,registrationPromise:t}}function zn(e){const t=e||{fid:yn(),registrationStatus:0};return qn(t)}function Un(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const e=Promise.reject(on.create("app-offline"));return{installationEntry:t,registrationPromise:e}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};const n=Hn(e,r);return{installationEntry:r,registrationPromise:n}}else if(t.registrationStatus===1){return{installationEntry:t,registrationPromise:Vn(e)}}else{return{installationEntry:t}}}async function Hn(e,t){try{const r=await vn(e,t);return Ln(e.appConfig,r)}catch(r){if(sn(r)&&r.customData.serverCode===409){await jn(e.appConfig)}else{await Ln(e.appConfig,{fid:t.fid,registrationStatus:0})}throw r}}async function Vn(e){let t=await $n(e.appConfig);while(t.registrationStatus===1){await gn(100);t=await $n(e.appConfig)}if(t.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Wn(e);if(r){return r}else{return t}}return t}function $n(e){return Bn(e,(e=>{if(!e){throw on.create("installation-not-found")}return qn(e)}))}function qn(e){if(Kn(e)){return{fid:e.fid,registrationStatus:0}}return e}function Kn(e){return e.registrationStatus===1&&e.registrationTime+Xr<Date.now()}async function Gn({appConfig:e,heartbeatServiceProvider:t},r){const n=Jn(e,r);const i=ln(e,r);const o=t.getImmediate({optional:true});if(o){const e=await o.getHeartbeatsHeader();if(e){i.append("x-firebase-client",e)}}const s={installation:{sdkVersion:Qr,appId:e.appId}};const a={method:"POST",headers:i,body:JSON.stringify(s)};const c=await dn((()=>fetch(n,a)));if(c.ok){const e=await c.json();const t=cn(e);return t}else{throw await un("Generate Auth Token",c)}}function Jn(e,{fid:t}){return`${an(e)}/${t}/authTokens:generate`}async function Xn(e,t=false){let r;const n=await Bn(e.appConfig,(n=>{if(!ei(n)){throw on.create("not-registered")}const i=n.authToken;if(!t&&ti(i)){return n}else if(i.requestStatus===1){r=Qn(e,t);return n}else{if(!navigator.onLine){throw on.create("app-offline")}const t=ni(n);r=Yn(e,t);return t}}));const i=r?await r:n.authToken;return i}async function Qn(e,t){let r=await Zn(e.appConfig);while(r.authToken.requestStatus===1){await gn(100);r=await Zn(e.appConfig)}const n=r.authToken;if(n.requestStatus===0){return Xn(e,t)}else{return n}}function Zn(e){return Bn(e,(e=>{if(!ei(e)){throw on.create("not-registered")}const t=e.authToken;if(ii(t)){return{...e,authToken:{requestStatus:0}}}return e}))}async function Yn(e,t){try{const r=await Gn(e,t);const n={...t,authToken:r};await Ln(e.appConfig,n);return r}catch(r){if(sn(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)){await jn(e.appConfig)}else{const r={...t,authToken:{requestStatus:0}};await Ln(e.appConfig,r)}throw r}}function ei(e){return e!==undefined&&e.registrationStatus===2}function ti(e){return e.requestStatus===2&&!ri(e)}function ri(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+en}function ni(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function ii(e){return e.requestStatus===1&&e.requestTime+Xr<Date.now()}async function oi(e){const t=e;const{installationEntry:r,registrationPromise:n}=await Wn(t);if(n){n.catch(console.error)}else{Xn(t).catch(console.error)}return r.fid}async function si(e,t=false){const r=e;await ai(r);const n=await Xn(r,t);return n.token}async function ai(e){const{registrationPromise:t}=await Wn(e);if(t){await t}}async function ci(e,t){const r=ui(e,t);const n=ln(e,t);const i={method:"DELETE",headers:n};const o=await dn((()=>fetch(r,i)));if(!o.ok){throw await un("Delete Installation",o)}}function ui(e,{fid:t}){return`${an(e)}/${t}`}async function fi(e){const{appConfig:t}=e;const r=await Bn(t,(e=>{if(e&&e.registrationStatus===0){return undefined}return e}));if(r){if(r.registrationStatus===1){throw on.create("delete-pending-registration")}else if(r.registrationStatus===2){if(!navigator.onLine){throw on.create("app-offline")}else{await ci(t,r);await jn(t)}}}}function li(e,t){const{appConfig:r}=e;Cn(r,t);return()=>{En(r,t)}}function di(e=getApp()){const t=_getProvider(e,"installations").getImmediate();return t}function hi(e){if(!e||!e.options){throw pi("App Configuration")}if(!e.name){throw pi("App Name")}const t=["projectId","apiKey","appId"];for(const r of t){if(!e.options[r]){throw pi(r)}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function pi(e){return on.create("missing-app-config-values",{valueName:e})}const vi="installations";const gi="installations-internal";const bi=e=>{const t=e.getProvider("app").getImmediate();const r=hi(t);const n=lr(t,"heartbeat");const i={app:t,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()};return i};const mi=e=>{const t=e.getProvider("app").getImmediate();const r=lr(t,vi).getImmediate();const n={getId:()=>oi(r),getToken:e=>si(r,e)};return n};function wi(){fr(new We(vi,bi,"PUBLIC"));fr(new We(gi,mi,"PRIVATE"))}wi();Or(Gr,Jr);Or(Gr,Jr,"esm2020");const yi="/firebase-messaging-sw.js";const _i="/firebase-cloud-messaging-push-scope";const Si="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";const ki="https://fcmregistrations.googleapis.com/v1";const Ii="google.c.a.c_id";const Ci="google.c.a.c_l";const Ei="google.c.a.ts";const Pi="google.c.a.e";const Oi=1e4;var Mi;(function(e){e[e["DATA_MESSAGE"]=1]="DATA_MESSAGE";e[e["DISPLAY_NOTIFICATION"]=3]="DISPLAY_NOTIFICATION"})(Mi||(Mi={}));var Ai;(function(e){e["PUSH_RECEIVED"]="push-received";e["NOTIFICATION_CLICKED"]="notification-clicked"})(Ai||(Ai={}));function Ni(e){const t=new Uint8Array(e);const r=btoa(String.fromCharCode(...t));return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ti(e){const t="=".repeat((4-e.length%4)%4);const r=(e+t).replace(/\-/g,"+").replace(/_/g,"/");const n=atob(r);const i=new Uint8Array(n.length);for(let e=0;e<n.length;++e){i[e]=n.charCodeAt(e)}return i}const xi="fcm_token_details_db";const Di=5;const Ri="fcm_token_object_Store";async function Fi(e){if("databases"in indexedDB){const e=await indexedDB.databases();const t=e.map((e=>e.name));if(!t.includes(xi)){return null}}let t=null;const r=await wt(xi,Di,{upgrade:async(r,n,i,o)=>{if(n<2){return}if(!r.objectStoreNames.contains(Ri)){return}const s=o.objectStore(Ri);const a=await s.index("fcmSenderId").get(e);await s.clear();if(!a){return}if(n===2){const e=a;if(!e.auth||!e.p256dh||!e.endpoint){return}t={token:e.fcmToken,createTime:e.createTime??Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:typeof e.vapidKey==="string"?e.vapidKey:Ni(e.vapidKey)}}}else if(n===3){const e=a;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Ni(e.auth),p256dh:Ni(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Ni(e.vapidKey)}}}else if(n===4){const e=a;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:Ni(e.auth),p256dh:Ni(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:Ni(e.vapidKey)}}}}});r.close();await yt(xi);await yt("fcm_vapid_details_db");await yt("undefined");return Li(t)?t:null}function Li(e){if(!e||!e.subscriptionOptions){return false}const{subscriptionOptions:t}=e;return typeof e.createTime==="number"&&e.createTime>0&&typeof e.token==="string"&&e.token.length>0&&typeof t.auth==="string"&&t.auth.length>0&&typeof t.p256dh==="string"&&t.p256dh.length>0&&typeof t.endpoint==="string"&&t.endpoint.length>0&&typeof t.swScope==="string"&&t.swScope.length>0&&typeof t.vapidKey==="string"&&t.vapidKey.length>0}const ji="firebase-messaging-database";const Bi=1;const Wi="firebase-messaging-store";let zi=null;function Ui(){if(!zi){zi=wt(ji,Bi,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Wi)}}})}return zi}async function Hi(e){const t=qi(e);const r=await Ui();const n=await r.transaction(Wi).objectStore(Wi).get(t);if(n){return n}else{const t=await Fi(e.appConfig.senderId);if(t){await Vi(e,t);return t}}}async function Vi(e,t){const r=qi(e);const n=await Ui();const i=n.transaction(Wi,"readwrite");await i.objectStore(Wi).put(t,r);await i.done;return t}async function $i(e){const t=qi(e);const r=await Ui();const n=r.transaction(Wi,"readwrite");await n.objectStore(Wi).delete(t);await n.done}function qi({appConfig:e}){return e.appId}const Ki={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the "+"user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be "+"called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be "+"called before calling getToken() to ensure your VAPID key is used."};const Gi=new Y("messaging","Messaging",Ki);async function Ji(e,t){const r=await Yi(e);const n=eo(t);const i={method:"POST",headers:r,body:JSON.stringify(n)};let o;try{const t=await fetch(Zi(e.appConfig),i);o=await t.json()}catch(e){throw Gi.create("token-subscribe-failed",{errorInfo:e?.toString()})}if(o.error){const e=o.error.message;throw Gi.create("token-subscribe-failed",{errorInfo:e})}if(!o.token){throw Gi.create("token-subscribe-no-token")}return o.token}async function Xi(e,t){const r=await Yi(e);const n=eo(t.subscriptionOptions);const i={method:"PATCH",headers:r,body:JSON.stringify(n)};let o;try{const r=await fetch(`${Zi(e.appConfig)}/${t.token}`,i);o=await r.json()}catch(e){throw Gi.create("token-update-failed",{errorInfo:e?.toString()})}if(o.error){const e=o.error.message;throw Gi.create("token-update-failed",{errorInfo:e})}if(!o.token){throw Gi.create("token-update-no-token")}return o.token}async function Qi(e,t){const r=await Yi(e);const n={method:"DELETE",headers:r};try{const r=await fetch(`${Zi(e.appConfig)}/${t}`,n);const i=await r.json();if(i.error){const e=i.error.message;throw Gi.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw Gi.create("token-unsubscribe-failed",{errorInfo:e?.toString()})}}function Zi({projectId:e}){return`${ki}/projects/${e}/registrations`}async function Yi({appConfig:e,installations:t}){const r=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function eo({p256dh:e,auth:t,endpoint:r,vapidKey:n}){const i={web:{endpoint:r,auth:t,p256dh:e}};if(n!==Si){i.web.applicationPubKey=n}return i}const to=7*24*60*60*1e3;async function ro(e){const t=await so(e.swRegistration,e.vapidKey);const r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Ni(t.getKey("auth")),p256dh:Ni(t.getKey("p256dh"))};const n=await Hi(e.firebaseDependencies);if(!n){return oo(e.firebaseDependencies,r)}else if(!ao(n.subscriptionOptions,r)){try{await Qi(e.firebaseDependencies,n.token)}catch(e){console.warn(e)}return oo(e.firebaseDependencies,r)}else if(Date.now()>=n.createTime+to){return io(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r})}else{return n.token}}async function no(e){const t=await Hi(e.firebaseDependencies);if(t){await Qi(e.firebaseDependencies,t.token);await $i(e.firebaseDependencies)}const r=await e.swRegistration.pushManager.getSubscription();if(r){return r.unsubscribe()}return true}async function io(e,t){try{const r=await Xi(e.firebaseDependencies,t);const n={...t,token:r,createTime:Date.now()};await Vi(e.firebaseDependencies,n);return r}catch(e){throw e}}async function oo(e,t){const r=await Ji(e,t);const n={token:r,createTime:Date.now(),subscriptionOptions:t};await Vi(e,n);return n.token}async function so(e,t){const r=await e.pushManager.getSubscription();if(r){return r}return e.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:Ti(t)})}function ao(e,t){const r=t.vapidKey===e.vapidKey;const n=t.endpoint===e.endpoint;const i=t.auth===e.auth;const o=t.p256dh===e.p256dh;return r&&n&&i&&o}function co(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};uo(t,e);fo(t,e);lo(t,e);return t}function uo(e,t){if(!t.notification){return}e.notification={};const r=t.notification.title;if(!!r){e.notification.title=r}const n=t.notification.body;if(!!n){e.notification.body=n}const i=t.notification.image;if(!!i){e.notification.image=i}const o=t.notification.icon;if(!!o){e.notification.icon=o}}function fo(e,t){if(!t.data){return}e.data=t.data}function lo(e,t){if(!t.fcmOptions&&!t.notification?.click_action){return}e.fcmOptions={};const r=t.fcmOptions?.link??t.notification?.click_action;if(!!r){e.fcmOptions.link=r}const n=t.fcmOptions?.analytics_label;if(!!n){e.fcmOptions.analyticsLabel=n}}function ho(e){return typeof e==="object"&&!!e&&Ii in e}po("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function po(e,t){const r=[];for(let n=0;n<e.length;n++){r.push(e.charAt(n));if(n<t.length){r.push(t.charAt(n))}}return r.join("")}function vo(e){if(!e||!e.options){throw go("App Configuration Object")}if(!e.name){throw go("App Name")}const t=["projectId","apiKey","appId","messagingSenderId"];const{options:r}=e;for(const e of t){if(!r[e]){throw go(e)}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function go(e){return Gi.create("missing-app-config-values",{valueName:e})}class bo{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=false;this.onBackgroundMessageHandler=null;this.onMessageHandler=null;this.logEvents=[];this.isLogServiceStarted=false;const n=vo(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function mo(e){try{e.swRegistration=await navigator.serviceWorker.register(yi,{scope:_i});e.swRegistration.update().catch((()=>{}));await wo(e.swRegistration)}catch(e){throw Gi.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function wo(e){return new Promise(((t,r)=>{const n=setTimeout((()=>r(new Error(`Service worker not registered after ${Oi} ms`))),Oi);const i=e.installing||e.waiting;if(e.active){clearTimeout(n);t()}else if(i){i.onstatechange=e=>{if(e.target?.state==="activated"){i.onstatechange=null;clearTimeout(n);t()}}}else{clearTimeout(n);r(new Error("No incoming service worker found."))}}))}async function yo(e,t){if(!t&&!e.swRegistration){await mo(e)}if(!t&&!!e.swRegistration){return}if(!(t instanceof ServiceWorkerRegistration)){throw Gi.create("invalid-sw-registration")}e.swRegistration=t}async function _o(e,t){if(!!t){e.vapidKey=t}else if(!e.vapidKey){e.vapidKey=Si}}async function So(e,t){if(!navigator){throw Gi.create("only-available-in-window")}if(Notification.permission==="default"){await Notification.requestPermission()}if(Notification.permission!=="granted"){throw Gi.create("permission-blocked")}await _o(e,t?.vapidKey);await yo(e,t?.serviceWorkerRegistration);return ro(e)}async function ko(e,t,r){const n=Io(t);const i=await e.firebaseDependencies.analyticsProvider.get();i.logEvent(n,{message_id:r[Ii],message_name:r[Ci],message_time:r[Ei],message_device_time:Math.floor(Date.now()/1e3)})}function Io(e){switch(e){case Ai.NOTIFICATION_CLICKED:return"notification_open";case Ai.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Co(e,t){const r=t.data;if(!r.isFirebaseMessaging){return}if(e.onMessageHandler&&r.messageType===Ai.PUSH_RECEIVED){if(typeof e.onMessageHandler==="function"){e.onMessageHandler(co(r))}else{e.onMessageHandler.next(co(r))}}const n=r.data;if(ho(n)&&n[Pi]==="1"){await ko(e,r.messageType,n)}}const Eo="@firebase/messaging";const Po="0.12.23";const Oo=e=>{const t=new bo(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));navigator.serviceWorker.addEventListener("message",(e=>Co(t,e)));return t};const Mo=e=>{const t=e.getProvider("messaging").getImmediate();const r={getToken:e=>So(t,e)};return r};function Ao(){fr(new We("messaging",Oo,"PUBLIC"));fr(new We("messaging-internal",Mo,"PRIVATE"));Or(Eo,Po);Or(Eo,Po,"esm2020")}async function No(){try{await J()}catch(e){return false}return typeof window!=="undefined"&&G()&&X()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}async function To(e){if(!navigator){throw Gi.create("only-available-in-window")}if(!e.swRegistration){await mo(e)}return no(e)}function xo(e,t){if(!navigator){throw Gi.create("only-available-in-window")}e.onMessageHandler=t;return()=>{e.onMessageHandler=null}}function Do(e=Cr()){No().then((e=>{if(!e){throw Gi.create("unsupported-browser")}}),(e=>{throw Gi.create("indexed-db-unsupported")}));return lr(Be(e),"messaging").getImmediate()}async function Ro(e,t){e=Be(e);return So(e,t)}function Fo(e){e=getModularInstance(e);return To(e)}function Lo(e,t){e=Be(e);return xo(e,t)}Ao();var jo=undefined&&undefined.__assign||function(){jo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return jo.apply(this,arguments)};var Bo="https://";var Wo={debug:"true"==="true",isTest:"false"==="true",resourceToken:"2gFE1SuJ4eJj-08a78b7b3baddce7",apiServerHost:"pxl-dt5mvmx1epcv31k8.dev.altcraft.com",swPath:"/service-worker.js",vapidKey:"BEFQ4t1xrOGbkOnjSUAfXlJjJTizJ5kawtp4eqwb0-UFl1tC9OyHqziOuXpoOkQPxCtPygNMtOtqhjnUOXRwYec",firebase:{apiKey:"AIzaSyDXiesYo-Xo9dBxKX33uU_QrvZNDYTWxZA",projectId:"pwa-push-4bd9a",messagingSenderId:"1002622720147",appId:"1:1002622720147:web:da6f0e9abb83a3e1b75566"},browsers:{Chrome:{isFirebase:"true"==="true"},Firefox:{isFirebase:"true"==="true"},Opera:{isFirebase:"true"==="true"},"Yandex Browser":{isFirebase:"true"==="true"},"Samsung Internet for Android":{isFirebase:"true"==="true"},Safari:{websitePushID:"web.io.github.romanglazkov",websitePushAPI:"https://pxl-dt5mvmx1epcv31k8.dev.altcraft.com/ap"}},expirationSWChrome:"900"};var zo={randomPrefix:"Shahkoop2aeleiv8Ierief_",serverPrefix:Bo,serverActionHandlers:{save:"/pixel?_push_pix=/push/subscription/save",delete:"/pixel?_push_pix=/push/subscription/delete",update:"/pixel?_push_pix=/push/subscription/update",suspend:"/pixel?_push_pix=/push/subscription/suspend"},serverCookiePath:"/pixel?_push_pix=/set_cookie_only",serverPushContentPath:"/pixel?_push_pix=/push/content/get",serverURL:(Bo+Wo.apiServerHost).replace(/\/+$/,""),swPath:"/service-worker.js",isTest:false,cookieID:"",browser:undefined,firebase:{authSubdomain:"firebaseapp.com",bucketSubdomain:"appspot.com",dbSubdomain:"firebaseio.com"},allFirebase:undefined};var Uo=jo(jo(jo({},zo),Wo),{firebase:jo(jo({},zo.firebase),Wo.firebase),expirationSWChrome:parseInt(Wo.expirationSWChrome,10)||0});const Ho=Uo;var Vo=r(160);var $o=r(880);var qo=r.n($o);var Ko=r(790);var Go;(function(e){e["Granted"]="granted";e["Denied"]="denied";e["Default"]="default"})(Go||(Go={}));var Jo;(function(e){e["subscribe"]="subscribe";e["updateSubscription"]="update_subscription";e["suspendSubscription"]="suspend_subscription"})(Jo||(Jo={}));var Xo=Object.prototype.hasOwnProperty;function Qo(e,t){return typeof e==="object"&&Xo.call(e,t)}function Zo(e){return function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}if(e){console.info.apply(null,t)}}}var Yo=ls(Ho.debug);var es=undefined&&undefined.__assign||function(){es=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return es.apply(this,arguments)};var ts=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n["throw"](e))}catch(e){o(e)}}function c(e){e.done?r(e.value):i(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var rs=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var ns=function(){return"safari"in window&&"pushNotification"in window.safari};var is={};function os(){return"serviceWorker"in window.navigator}function ss(){return ts(this,void 0,void 0,(function(){return rs(this,(function(e){if(os()){return[2,navigator.serviceWorker.getRegistrations().then((function(e){return e.find((function(e){var t=e.active,r=e.waiting,n=e.installing;var i=t||r||n;return i&&i.scriptURL.includes("/service-worker.js?browser")}))}))]}console.log("can`t use service worker");return[2,undefined]}))}))}function as(e){return e.split(" ").join("")}function cs(e){if(e.allFirebase)return true;var t=e.browser;if(t){var r=e.browsers[t];if(Qo(r,"isFirebase")){return r.isFirebase}return false}throw new Error("Invalid config")}function us(e){return ts(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,c,u;return rs(this,(function(f){switch(f.label){case 0:t=e.serverURL,r=e.serverCookiePath,n=e.resourceToken;f.label=1;case 1:f.trys.push([1,9,,10]);return[4,Ko.getItem("_ak_cookie")];case 2:i=f.sent()||"";return[4,fetch(t+r,{method:"post",credentials:"include",headers:i?{"X-Cookie":i}:undefined,body:JSON.stringify({resource_token:n})}).then((function(e){return{body:e.json(),headers:e.headers}}))];case 3:o=f.sent();s={cookie_id:"","X-Cookie":""};a="cookie_id";return[4,o.body];case 4:if(!(a in f.sent()))return[3,6];c=s;return[4,o.body];case 5:c.cookie_id=f.sent().cookie_id;f.label=6;case 6:Yo("X-Cookie:",o===null||o===void 0?void 0:o.headers.has("X-Cookie"),o===null||o===void 0?void 0:o.headers.get("X-Cookie"));if(!o.headers.has("X-Cookie"))return[3,8];s["X-Cookie"]=o.headers.get("X-Cookie")||"";if(!s["X-Cookie"])return[3,8];return[4,Ko.setItem("_ak_cookie",s["X-Cookie"])];case 7:f.sent();f.label=8;case 8:if(s["X-Cookie"]||s.cookie_id){return[2,s]}console.error("Invalid response for set cookie:",o.body);return[3,10];case 9:u=f.sent();console.error("Unable to set cookie",u);return[3,10];case 10:return[2,undefined]}}))}))}function fs(e,t){var r=new RegExp(t+"=(\\w*);?","g");var n=Array.from(e.matchAll(r));return n.length?n[0][1]:""}function ls(e){return function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}if(e){console.info.apply(null,t)}}}function ds(e){return new Url(e,true).query.browser}function hs(e){if(!e.browser&&"userAgent"in window.navigator){return qo().getParser(window.navigator.userAgent).getBrowser().name}return undefined}function ps(e,t){return ts(this,void 0,void 0,(function(){return rs(this,(function(r){switch(r.label){case 0:return[4,Ko.setItem(e+"current_token",t)];case 1:r.sent();return[2]}}))}))}function vs(e){return ts(this,void 0,void 0,(function(){var t;return rs(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,Ko.getItem(e+"current_token")];case 1:return[2,r.sent()];case 2:t=r.sent();console.log("error on getToken",t);return[2,null];case 3:return[2]}}))}))}function gs(e){if(e===void 0){e=Ho.randomPrefix}return ts(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,c;return rs(this,(function(u){switch(u.label){case 0:t=bs(e);return[4,vs(e)];case 1:r=u.sent();n=bs(e+"_endpoint_");return[4,vs(e+"_endpoint_")];case 2:i=u.sent();return[4,vs(e+"_keys_")];case 3:o=u.sent();Yo("Founded tokens",{tokenLS:t,token:r,endpointLS:n,endpoint:i,keys:o});if(t){ms(e)}if(n){ms(e+"_endpoint_")}if(!o)return[3,7];u.label=4;case 4:u.trys.push([4,6,,7]);return[4,Ko.removeItem(e+"_keys_current_token")];case 5:u.sent();Yo({result:"success"});return[3,7];case 6:s=u.sent();Yo({result:"error",error:s});return[3,7];case 7:if(!r)return[3,11];u.label=8;case 8:u.trys.push([8,10,,11]);return[4,Ko.removeItem(e+"current_token")];case 9:u.sent();return[2,{result:"success"}];case 10:a=u.sent();return[2,{result:"error",error:a}];case 11:if(!i)return[3,15];u.label=12;case 12:u.trys.push([12,14,,15]);return[4,Ko.removeItem(e+"_endpoint_")];case 13:u.sent();return[2,{result:"success"}];case 14:c=u.sent();return[2,{result:"error",error:c}];case 15:return[2,{result:"not-found"}]}}))}))}function bs(e){return localStorage.getItem(e+"current_token")}function ms(e){localStorage.removeItem(e+"current_token")}function ws(e,t){var r,n,i,o,s;return ts(this,void 0,void 0,(function(){var a,c,u,f,l;return rs(this,(function(d){switch(d.label){case 0:return[4,Notification.requestPermission()];case 1:a=d.sent();if(!(a===Go.Granted))return[3,4];return[4,ss().then((function(e){return e&&e.active?e:undefined}))];case 2:c=d.sent();u=(r=t.data)===null||r===void 0?void 0:r.ak_actions;f=void 0;if(u){try{Yo("push firebase parse ak_actions start");f=JSON.parse(u);Yo("push firebase parse ak_actions complete")}catch(e){Yo("push firebase parse ak_actions error: ",e)}}l={body:(n=t.notification)===null||n===void 0?void 0:n.body,icon:(i=t.notification)===null||i===void 0?void 0:i.icon,image:(o=t.notification)===null||o===void 0?void 0:o.image,data:{click_action:(s=t.fcmOptions)===null||s===void 0?void 0:s.link},actions:f};if(!c)return[3,4];return[4,c.showNotification(e,l)];case 3:d.sent();d.label=4;case 4:return[2]}}))}))}function ys(e){var t=e.browser,r=e.expirationSWChrome,n=e.swPath;if(t==="Chrome"){var i=r!==0?r:900;return n+"?browser="+t+"&expiration="+Math.floor(Date.now()/(i*1e3))}return n+"?browser="+t}function _s(){return ts(this,void 0,void 0,(function(){var e,t,r,n;return rs(this,(function(i){switch(i.label){case 0:if(!("showNotification"in ServiceWorkerRegistration.prototype)){console.error("Notifications is not supported");return[2,false]}if(!(Notification.permission!==Go.Denied))return[3,10];if(!("PushManager"in window))return[3,8];Yo("getPushServiceWorker","start");return[4,ss()];case 1:e=i.sent();Yo("getPushServiceWorker","complete");Yo("serviceWorkerRegistration",e);i.label=2;case 2:i.trys.push([2,6,,7]);Yo("serviceWorkerRegistration.pushManager.getSubscription","start");if(!e)return[3,4];return[4,e.pushManager.getSubscription()];case 3:r=i.sent();return[3,5];case 4:r=undefined;i.label=5;case 5:t=r;Yo("serviceWorkerRegistration.pushManager.getSubscription","complete");Yo("subscription",t);return[2,true];case 6:n=i.sent();console.error("Error on getting subscription data",n);return[2,false];case 7:return[3,9];case 8:console.error("Push-notification is not supported by the browser");return[2,false];case 9:return[3,11];case 10:console.log("User denied notifications");return[2,false];case 11:return[2]}}))}))}function Ss(e,t){return ts(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u;return rs(this,(function(f){switch(f.label){case 0:if(!(Notification.permission===Go.Granted))return[3,24];r=e.browser;switch(r){case"Chrome":return[3,1];case"Firefox":return[3,1];case"Yandex Browser":return[3,1];case"Samsung Internet for Android":return[3,1];case"Opera":return[3,1];case"Safari":return[3,17]}return[3,23];case 1:if(!os())return[3,15];Yo("can use service worker");if(!cs(e))return[3,12];n=void 0;Yo("> getPushServiceWorker","start");f.label=2;case 2:f.trys.push([2,4,,5]);return[4,ss()];case 3:n=f.sent();Yo("< getPushServiceWorker","complete");Yo(">> registration",n);return[3,5];case 4:i=f.sent();Yo("err get registration",i);return[3,5];case 5:Yo("should use firebase");Yo("firebase.initializeApp","start");o={appId:e.firebase.appId,apiKey:e.firebase.apiKey,projectId:e.firebase.projectId,messagingSenderId:e.firebase.messagingSenderId,storageBucket:[e.firebase.projectId,e.firebase.bucketSubdomain].join("."),authDomain:[e.firebase.projectId,e.firebase.authSubdomain].join("."),databaseURL:[e.firebase.projectId,e.firebase.dbSubdomain].join(".")};kr(o);Yo("firebase.initializeApp","complete");s=Do();if(!n)return[3,7];Yo("updateFirebaseToken","start");return[4,Os(e,t)];case 6:f.sent();Yo("updateFirebaseToken","complete");f.label=7;case 7:Yo("firebase.messaging().getToken","start");a=void 0;f.label=8;case 8:f.trys.push([8,10,,11]);return[4,Ro(s,{serviceWorkerRegistration:n})];case 9:a=f.sent();return[3,11];case 10:c=f.sent();console.error("Error occurred: ",c);return[3,11];case 11:Yo("firebase.messaging().getToken","complete");if(a&&!is[a]){Yo("added firebase.messaging().onMessage handler");is[a]=Lo(s,(function(e){var t,r;Yo("Message received:",e);ws((r=(t=e.notification)===null||t===void 0?void 0:t.title)!==null&&r!==void 0?r:"",e)}))}return[3,14];case 12:Yo("should not use firebase");Yo("updateDefaultSubscription","start");return[4,As(e,t)];case 13:f.sent();Yo("updateDefaultSubscription","complete");f.label=14;case 14:return[3,16];case 15:Yo("can`t use service worker");console.error("There is no serviceWorker");f.label=16;case 16:return[3,24];case 17:if(!ns())return[3,20];u=window.safari.pushNotification.permission(e.browsers.Safari.websitePushID).deviceToken;if(!u)return[3,19];return[4,ps(e.randomPrefix,u)];case 18:f.sent();Yo("added token to cache:",u);f.label=19;case 19:return[3,22];case 20:return[4,Ms(e,t)];case 21:f.sent();f.label=22;case 22:return[3,24];case 23:return[2,undefined];case 24:return[2,undefined]}}))}))}function ks(e){return ts(this,void 0,void 0,(function(){var t,r,n,i,o,s;return rs(this,(function(a){switch(a.label){case 0:t=e.browser,r=e.expirationSWChrome,n=e.swPath;Yo(" getPushServiceWorker","start");a.label=1;case 1:a.trys.push([1,3,,4]);return[4,ss()];case 2:i=a.sent();Yo(" getPushServiceWorker","complete");Yo("registration",i);return[3,4];case 3:o=a.sent();Yo("err getPushServiceWorker",o);return[3,4];case 4:Yo("navigator.serviceWorker.register","start");return[4,navigator.serviceWorker.register(ys({browser:t,expirationSWChrome:r,swPath:n}))];case 5:s=a.sent();Yo("navigator.serviceWorker.register","complete");Yo("serviceWorkerRegistration.update","start");return[4,s.update()];case 6:a.sent();Yo("serviceWorkerRegistration.update","complete");Yo(s);return[2,s]}}))}))}function Is(e){return ts(this,void 0,void 0,(function(){var t,r,n,i,o;return rs(this,(function(s){switch(s.label){case 0:t=e.browser,r=e.expirationSWChrome,n=e.swPath;Yo("replace service worker",{browser:t,expirationSWChrome:r,swPath:n});if(!(Notification.permission===Go.Granted))return[3,7];Yo("Notification permission is granted.");return[4,ss()];case 1:i=s.sent();console.log("Push SW status: ",Boolean(i));if(!i)return[3,2];Yo("service worker is our. Aborting replace service worker.");return[3,6];case 2:Yo("navigator.serviceWorker.controller, was cleaned");s.label=3;case 3:s.trys.push([3,5,,6]);Yo("registerServiceWorker start");return[4,ks({browser:t,expirationSWChrome:r,swPath:n})];case 4:s.sent();Yo(" registerServiceWorker complete");return[3,6];case 5:o=s.sent();Yo("err register service worker",o);return[3,6];case 6:return[3,8];case 7:Yo("Notification permission is not a granted. Aborting replace service worker.");s.label=8;case 8:return[2]}}))}))}function Cs(e){return ts(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,c,u,f,l,d,h,p,v;return rs(this,(function(g){switch(g.label){case 0:t=e.action,r=e.provider,n=e.subscription,i=e.match,o=e.update,s=e.customData,a=e.resourceToken,c=e.serverURL,u=e.endpointOld,f=e.keysOld,l=e.supOldSubscr,d=e.inexclusive;return[4,Ko.getItem("_ak_cookie")];case 1:h=g.sent()||"";v=Ho.serverActionHandlers;switch(t){case"save":p=c+v.save;break;case"delete":p=c+v.delete;break;case"update":p=c+v.update;break;case"suspend":p=c+v.suspend;break;default:throw new Error("Unknown "+t)}return[2,fetch(p,{method:"post",credentials:"include",headers:h?{"X-Cookie":h}:undefined,body:JSON.stringify(es(es(es(es(es(es({},s||{}),{provider:r,endpoint:n.endpoint,keys:n.keys,resource_token:a,match:JSON.stringify(i||{}),update:JSON.stringify(o||{})}),u?{endpoint_old:u}:{}),f?{keys_old:f}:{}),l&&u?{sup_old_subscr:true}:{}),d!==undefined?{inexclusive:d}:{}))}).then((function(e){Yo("X-Cookie:",e===null||e===void 0?void 0:e.headers.has("X-Cookie"),e===null||e===void 0?void 0:e.headers.get("X-Cookie"));if(e===null||e===void 0?void 0:e.headers.has("X-Cookie")){Ko.setItem("_ak_cookie",(e===null||e===void 0?void 0:e.headers.get("X-Cookie"))||"")}return e})).catch((function(e){return console.error("Can't post",t,e)}))]}}))}))}function Es(e){return ts(this,void 0,void 0,(function(){var t,r;return rs(this,(function(n){switch(n.label){case 0:t=bs(e);r=bs(e+"_endpoint_");if(!t)return[3,2];return[4,ps(e,t||"")];case 1:n.sent();ms(e);return[2,t];case 2:if(!r)return[3,4];return[4,ps(e+"_endpoint_",r||"")];case 3:n.sent();ms(e+"_endpoint_");return[2,t];case 4:return[2,null]}}))}))}function Ps(e,t,r){return ts(this,void 0,void 0,(function(){var n,i,o,s,a,c,u,f;return rs(this,(function(l){switch(l.label){case 0:l.trys.push([0,2,,3]);n=Jo.updateSubscription;i=t.provider,o=t.tokenCached,s=t.token,a=t.keys;c={browser:e.browser||"",provider:i,tokenCached:o,token:s};u={endpoint:s||"",keys:a};Yo("fetch subscription","start");return[4,Cs({action:"update",provider:i,subscription:u,match:{},update:{},customData:{},resourceToken:e.resourceToken,serverURL:e.serverURL,endpointOld:o||undefined,supOldSubscr:o?true:undefined})];case 1:l.sent();Yo("fetch subscription","complete");Yo("emit "+n,c);r.emit(n,c);return[3,3];case 2:f=l.sent();console.error("Unable to update subscription data",f);return[3,3];case 3:return[2]}}))}))}function Os(e,t){return ts(this,void 0,void 0,(function(){var r,n,i,o,s,a,c;return rs(this,(function(u){switch(u.label){case 0:Yo("firebase.messaging().getToken","start");Yo("> getPushServiceWorker","start");u.label=1;case 1:u.trys.push([1,3,,4]);return[4,ss()];case 2:r=u.sent();Yo("< getPushServiceWorker","complete");Yo(">> serviceWorkerRegistration",r);return[3,4];case 3:i=u.sent();Yo("err get registration",i);return[3,4];case 4:u.trys.push([4,6,,7]);return[4,Ro(Do(),{serviceWorkerRegistration:r})];case 5:n=u.sent();return[3,7];case 6:o=u.sent();console.error("Error occurred: ",o);return[3,7];case 7:Yo("firebase.messaging().getToken","complete",n);Yo("get cached token","start");return[4,vs(e.randomPrefix)];case 8:s=u.sent();Yo("get cached token","complete",s);if(!(n&&s!==n))return[3,14];Yo("New token detected: ",n);u.label=9;case 9:u.trys.push([9,13,,14]);if(!s)return[3,11];a={provider:as(e.browser||"")+"Firebase",tokenCached:s,token:n};return[4,Ps(e,a,t)];case 10:u.sent();u.label=11;case 11:Yo("saving firebase token to cache",n,"start");return[4,ps(e.randomPrefix,n||"")];case 12:u.sent();Yo("saving firebase token to cache",n,"complete");return[3,14];case 13:c=u.sent();console.error("Failed to save firebase token to the cache",c);return[3,14];case 14:return[2]}}))}))}function Ms(e,t){return ts(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l;return rs(this,(function(d){switch(d.label){case 0:return[4,ss()];case 1:r=d.sent();d.label=2;case 2:d.trys.push([2,11,,12]);if(!r){Yo("getPushServiceWorker has empty, exit updateSafariPWAToken");return[2]}Yo("serviceWorkerRegistration.pushManager.getSubscription","start");return[4,r.pushManager.getSubscription()];case 3:n=d.sent();i=n===null||n===void 0?void 0:n.endpoint;Yo("serviceWorkerRegistration.pushManager.getSubscription","complete");Yo("subscription",n);a=(s=JSON).parse;return[4,vs(e.randomPrefix+"_keys_")];case 4:o=a.apply(s,[d.sent()||"null"]);return[4,vs(e.randomPrefix)];case 5:c=d.sent();Yo("get cached token","complete",c,"and keys",o);if(!(i&&c!==i))return[3,10];Yo("New token detected:",i);u=n===null||n===void 0?void 0:n.toJSON().keys;if(!c)return[3,7];f={provider:as(e.browser||""),tokenCached:c,token:i,keys:u};return[4,Ps(e,f,t)];case 6:d.sent();d.label=7;case 7:Yo("saving token to cache",i,"and keys",u,"start");return[4,ps(e.randomPrefix,i||"")];case 8:d.sent();return[4,ps(e.randomPrefix+"_keys_",JSON.stringify(u)||"")];case 9:d.sent();Yo("saving token to cache",i,"and keys",u,"complete");d.label=10;case 10:return[3,12];case 11:l=d.sent();console.error("Failed to save token and keys to the cache",l);return[3,12];case 12:return[2]}}))}))}function As(e,t){return ts(this,void 0,void 0,(function(){var r,n,i,o,s;return rs(this,(function(a){switch(a.label){case 0:Yo("getPushServiceWorker","start");return[4,ss()];case 1:r=a.sent();if(!r){Yo("getPushServiceWorker has empty, exit updateDefaultSubscription.");return[2]}Yo("getPushServiceWorker","complete");Yo("serviceWorkerRegistration.pushManager.subscribe","start");return[4,r.pushManager.getSubscription()];case 2:n=a.sent();Yo("serviceWorkerRegistration.pushManager.subscribe","complete");Yo("get cached endpoint","start");return[4,vs(e.randomPrefix+"_endpoint_")];case 3:i=a.sent();Yo("get cached endpoint","complete",i);if(!(n&&i!==n.endpoint))return[3,9];a.label=4;case 4:a.trys.push([4,8,,9]);if(!i)return[3,6];o={provider:as(e.browser||""),tokenCached:i,token:n.endpoint};return[4,Ps(e,o,t)];case 5:a.sent();a.label=6;case 6:Yo("saving subscription endpoint from push manager to cache",n.endpoint,"start");return[4,ps(e.randomPrefix+"_endpoint_",n.endpoint)];case 7:a.sent();Yo("saving subscription endpoint from push manager to cache",n.endpoint,"complete");return[3,9];case 8:s=a.sent();console.error("Failed to save subscription endpoint from push manager to the cache",s);return[3,9];case 9:return[2]}}))}))}var Ns;(function(e){e["Ok"]="ok";e["Fail"]="fail"})(Ns||(Ns={}));var Ts=undefined&&undefined.__assign||function(){Ts=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};return Ts.apply(this,arguments)};var xs=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n["throw"](e))}catch(e){o(e)}}function c(e){e.done?r(e.value):i(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var Ds=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var Rs="";function Fs(e){Rs=e}function Ls(e){var t="=".repeat((4-e.length%4)%4);var r=(e+t).replace(/-/g,"+").replace(/_/g,"/");var n=window.atob(r);var i=new Uint8Array(n.length);for(var o=0;o<n.length;++o){i[o]=n.charCodeAt(o)}return i}var js=function(){function e(e){if(e===void 0){e={}}this.isPendingInitSubscription=false;this.config=Ts(Ts(Ts({},Ho),{cookieID:Ho.cookieID||Rs}),e);if(!this.config.browser){throw new Error("Can't detect browser")}}e.prototype.subscribeSafariNativePush=function(t){return xs(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l,d,h,p;return Ds(this,(function(v){switch(v.label){case 0:r=t.match,n=t.update,i=t.customData;o=Jo.subscribe;Yo("getPushServiceWorker","start");return[4,ss()];case 1:s=v.sent();Yo("getPushServiceWorker","complete");Yo(s);v.label=2;case 2:v.trys.push([2,10,,11]);a=Ls(this.config.vapidKey);if(!s){Yo("getPushServiceWorker has empty, exit subscribeSafariNativePush");return[2]}Yo("serviceWorkerRegistration.pushManager.subscribe","start");return[4,s.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:a})];case 3:c=v.sent();u=c===null||c===void 0?void 0:c.endpoint;Yo("serviceWorkerRegistration.pushManager.subscribe","complete");Yo("subscription",c);return[4,vs(this.config.randomPrefix)];case 4:f=v.sent();Yo("get cached token","complete",f);Yo("Permission granted, token: ",c.endpoint);if(!(u&&f!==u))return[3,8];Yo("tokenCached !== new token. Start save subscription");l=c.toJSON().keys;d=as(this.config.browser||"");h={browser:this.config.browser||"",provider:d,token:u,keys:l};Yo("fetchSubscription","start");return[4,Cs({action:"save",provider:d,subscription:{endpoint:u,keys:l},match:r,update:n,customData:i,resourceToken:this.config.resourceToken,serverURL:this.config.serverURL})];case 5:v.sent();Yo("fetchSubscription","complete");if(e.events){Yo("emit "+o,h);e.events.emit(o,h)}Yo("saving token to cache",u,"and keys",l,"start");return[4,ps(this.config.randomPrefix,u||"")];case 6:v.sent();return[4,ps(this.config.randomPrefix+"_keys_",JSON.stringify(l)||"")];case 7:v.sent();Yo("saving token to cache",u,"and keys",l,"complete");return[3,9];case 8:Yo("tokenCached !== new token. skip save subscription");v.label=9;case 9:return[3,11];case 10:p=v.sent();if(Notification.permission===Go.Denied){console.log("User turned off notifications")}else{console.error("Unable to subscribe",p)}return[3,11];case 11:return[2]}}))}))};e.prototype.subscribePushManager=function(t){return xs(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l;return Ds(this,(function(d){switch(d.label){case 0:r=t.match,n=t.update,i=t.customData;o=Jo.subscribe;Yo("getPushServiceWorker","start");return[4,ss()];case 1:s=d.sent();Yo("getPushServiceWorker","complete");Yo(s);d.label=2;case 2:d.trys.push([2,9,,10]);Yo("serviceWorkerRegistration.pushManager.subscribe","start");if(!s){Yo("getPushServiceWorker has empty, exit serviceWorkerRegistration.pushManager.subscribe");return[2]}return[4,s.pushManager.subscribe({userVisibleOnly:true})];case 3:a=d.sent();Yo("serviceWorkerRegistration.pushManager.subscribe","complete");Yo("subscription",a);return[4,vs(this.config.randomPrefix)];case 4:c=d.sent();Yo("get cached token","complete",c);Yo("Permission granted, token: ",a.endpoint);if(!(c!==a.endpoint))return[3,7];Yo("tokenCached !== new token. Start save subscription");u=as(this.config.browser||"");f={browser:this.config.browser||"",provider:u,token:a.endpoint};Yo("fetchSubscription","start");return[4,Cs({action:"save",provider:u,subscription:a,match:r,update:n,customData:i,resourceToken:this.config.resourceToken,serverURL:this.config.serverURL})];case 5:d.sent();Yo("fetchSubscription","complete");if(e.events){Yo("emit "+o,f);e.events.emit(o,f)}Yo("saving subscription endpoint from push manager to cache",a.endpoint,"start");return[4,ps(this.config.randomPrefix,a.endpoint)];case 6:d.sent();Yo("saving subscription endpoint from push manager to cache",a.endpoint,"complete");return[3,8];case 7:Yo("tokenCached === new token. skip save subscription");d.label=8;case 8:return[3,10];case 9:l=d.sent();if(Notification.permission===Go.Denied){console.log("User turned off notifications")}else{console.error("Unable to subscribe",l)}return[3,10];case 10:return[2]}}))}))};e.prototype.initialiseFirebaseNotification=function(t){var r;return xs(this,void 0,void 0,(function(){var n,i,o,s,a,c,u,f,l,d,h,p,v,g,b,m;return Ds(this,(function(w){switch(w.label){case 0:n=t.match,i=t.update,o=t.customData;s=Jo.subscribe;a=false;if(Notification.permission===Go.Default){a=true}Yo("Notification.requestPermission","start");return[4,Notification.requestPermission()];case 1:c=w.sent();Yo("Notification.requestPermission","complete");Yo("notificationPermission",c);if(!(c===Go.Granted))return[3,14];Yo("getPushServiceWorker","start");return[4,ss()];case 2:u=w.sent();Yo("getPushServiceWorker","complete");Yo(u);f=u;if(!(!f||!f.pushManager))return[3,6];w.label=3;case 3:w.trys.push([3,5,,6]);Yo("register service worker","start");return[4,ks({browser:Ho.browser,expirationSWChrome:Ho.expirationSWChrome,swPath:Ho.swPath})];case 4:f=w.sent();Yo("registration",f);Yo("register service worker","complete");return[3,6];case 5:l=w.sent();Yo("err register service worker",l);return[3,6];case 6:w.trys.push([6,13,,14]);Yo("firebase.messaging().getToken","start");Yo("registration before getToken STATE",(r=f===null||f===void 0?void 0:f.active)===null||r===void 0?void 0:r.state);Yo("needRunUseServiceWorker",a);Yo("permission",Notification.permission);return[4,Ro(Do(),{serviceWorkerRegistration:a?f:undefined})];case 7:d=w.sent();Yo("firebase.messaging().getToken","complete");Yo("get cached token","start");return[4,vs(this.config.randomPrefix)];case 8:h=w.sent();Yo("get cached token","complete",h);Yo("Permission granted, token: ",d);if(!d){console.warn("firebase.messaging().getToken",d)}if(!(h!==d&&d))return[3,10];Yo("New token detected:",d);p={endpoint:d};v=as(this.config.browser||"")+"Firebase";g={browser:this.config.browser||"",provider:v,token:p.endpoint};return[4,Cs({action:"save",provider:v,subscription:p,match:n,update:i,customData:o,resourceToken:this.config.resourceToken,serverURL:this.config.serverURL})];case 9:w.sent();if(e.events){Yo("emit "+s,g);e.events.emit(s,g)}if(!is[d]){Yo("added firebase.messaging().onMessage handler");b=Do();is[d]=Lo(b,(function(e){var t,r;Yo("Message received in initialize method:",e);ws((r=(t=e.notification)===null||t===void 0?void 0:t.title)!==null&&r!==void 0?r:"",e)}))}return[3,11];case 10:Yo("tokenCached == new token. skip subscription");w.label=11;case 11:Yo("saving firebase token to cache",d,"start");return[4,ps(this.config.randomPrefix,d||"")];case 12:w.sent();Yo("saving firebase token to cache",d,"complete");return[3,14];case 13:m=w.sent();console.error("Error occurred: ",m);return[3,14];case 14:return[2]}}))}))};e.prototype.initialiseDefaultNotification=function(e){return xs(this,void 0,void 0,(function(){var t,r,n,i,o;return Ds(this,(function(s){switch(s.label){case 0:t=e.customData,r=e.match,n=e.update;i=this.config.browser==="Opera"||this.config.browser==="Yandex Browser"||this.config.browser==="Samsung Internet for Android";if(i){console.error("Only firebase supported");return[2,undefined]}Yo("Initialise subscription for: "+this.config.browser+" without Firebase");return[4,ks({browser:Ho.browser,expirationSWChrome:Ho.expirationSWChrome,swPath:Ho.swPath})];case 1:s.sent();return[4,_s()];case 2:o=s.sent();Yo("checkSupportPushNotifications","complete");Yo(o);if(!o)return[3,4];Yo("subscribePushManager","start");return[4,this.subscribePushManager({match:r,update:n,customData:t})];case 3:s.sent();Yo("subscribePushManager","complete");s.label=4;case 4:return[2,undefined]}}))}))};e.prototype.initialiseSafariNotification=function(e){return xs(this,void 0,void 0,(function(){var t,r,n,i;return Ds(this,(function(o){switch(o.label){case 0:t=e.match,r=e.customData,n=e.update;Yo("Initialise subscription for: "+this.config.browser+" with Safari");if(ns()){i=window.safari.pushNotification.permission(this.config.browsers.Safari.websitePushID)}else{i={permission:Notification.permission}}Yo("initialiseSafariNotification","Permission data:",i);return[4,this.activateSafariPush({permissionData:i,match:t,update:n,cookieId:this.config.cookieID,customData:r})];case 1:o.sent();return[2]}}))}))};e.prototype.activateSafariPush=function(t){return xs(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l,d;var h=this;return Ds(this,(function(p){switch(p.label){case 0:r=t.permissionData,n=t.match,i=t.update,o=t.cookieId,s=t.customData;a=Jo.subscribe;if(!ns())return[3,7];Yo("Request permission on Safari");return[4,new Promise((function(e){window.safari.pushNotification.requestPermission(h.config.browsers.Safari.websitePushAPI,h.config.browsers.Safari.websitePushID,Ts(Ts({},s||{}),{resource_token:h.config.resourceToken,cookie_id:o,match:JSON.stringify(n||{}),update:JSON.stringify(i||{}),is_test:JSON.stringify(h.config.isTest)}),(function(t){Yo("New permissionData: ",t);e(t)}))}))];case 1:c=p.sent();if(!(c.permission===Go.Granted))return[3,5];u=window.safari.pushNotification.permission(this.config.browsers.Safari.websitePushID).deviceToken;return[4,vs(this.config.randomPrefix)];case 2:f=p.sent();Yo("deviceToken from pushNotification.permission",u);Yo("safari tokenCached:",f);Yo("Approved subscription");l={browser:this.config.browser||"",provider:"Safari",token:r.deviceToken||u||null};if(!u)return[3,4];return[4,ps(this.config.randomPrefix,u)];case 3:p.sent();Yo("added token to cache:",u);p.label=4;case 4:if(e.events){Yo("emit "+a,l);e.events.emit(a,l)}return[3,6];case 5:Yo("Permission === denied");p.label=6;case 6:return[3,14];case 7:Yo("Request permission on IOS");return[4,Notification.requestPermission()];case 8:d=p.sent();Yo("finished request permission on IOS, permission: ",d);if(!(d===Go.Granted))return[3,13];Yo("Initialise subscription for: "+this.config.browser+" by default notification");return[4,ss()];case 9:if(!!p.sent())return[3,11];Yo("getPushServiceWorker = null, registerServiceWorker start");return[4,ks({browser:Ho.browser,expirationSWChrome:Ho.expirationSWChrome,swPath:Ho.swPath})];case 10:p.sent();Yo("registerServiceWorker complete");p.label=11;case 11:Yo("subscribeSafariNativePush","start");return[4,this.subscribeSafariNativePush({match:n,update:i,customData:s})];case 12:p.sent();Yo("subscribeSafariNativePush","complete");return[3,14];case 13:Yo("Permission === denied");p.label=14;case 14:return[2]}}))}))};e.prototype.initialize=function(e){return xs(this,void 0,void 0,(function(){var t,r,n,i,o,s,a;return Ds(this,(function(c){switch(c.label){case 0:t=e.match,r=e.update,n=e.customData;Yo("initialize akPush","start");i=os();o=cs(this.config);if(Notification.permission===Go.Default){if(i&&o){Yo("should use firebase");Yo('Initialise subscription for: "'+this.config.browser+'" with Firebase');try{Yo("firebase.initializeApp","start");kr({appId:this.config.firebase.appId,apiKey:this.config.firebase.apiKey,projectId:this.config.firebase.projectId,messagingSenderId:this.config.firebase.messagingSenderId,storageBucket:[this.config.firebase.projectId,this.config.firebase.bucketSubdomain].join("."),authDomain:[this.config.firebase.projectId,this.config.firebase.authSubdomain].join("."),databaseURL:[this.config.firebase.projectId,this.config.firebase.dbSubdomain].join(".")});Yo("firebase.initializeApp","complete")}catch(e){Yo("err firebase.initializeApp",e)}}}if(!(Notification.permission!==Go.Denied))return[3,15];s=this.config.browser;switch(s){case"Chrome":return[3,1];case"Firefox":return[3,1];case"Yandex Browser":return[3,1];case"Samsung Internet for Android":return[3,1];case"Opera":return[3,1];case"Safari":return[3,11]}return[3,13];case 1:if(!i)return[3,9];Yo("can use service worker");if(!o)return[3,6];c.label=2;case 2:c.trys.push([2,4,,5]);Yo("activateFirebasePush","start");return[4,this.initialiseFirebaseNotification({match:t,update:r,customData:n})];case 3:c.sent();Yo("activateFirebasePush","complete");Yo("initialize akPush","complete");return[3,5];case 4:a=c.sent();Yo("err with register, update or active firebase push",a);return[3,5];case 5:return[3,8];case 6:Yo("should not use firebase");return[4,this.initialiseDefaultNotification({match:t,update:r,customData:n})];case 7:c.sent();Yo("initialize akPush","complete");c.label=8;case 8:return[3,10];case 9:console.error("There is no serviceWorker");c.label=10;case 10:return[3,14];case 11:return[4,this.initialiseSafariNotification({match:t,update:r,customData:n})];case 12:c.sent();Yo("initialize akPush","complete");return[3,14];case 13:return[2,undefined];case 14:return[3,16];case 15:Yo("initialize akPush","Notification permission is ",Notification.permission);c.label=16;case 16:return[2,undefined]}}))}))};e.prototype.getSubscriptionParams=function(e){return xs(this,void 0,void 0,(function(){var t,r,n,i,o,s,n,a,c;return Ds(this,(function(u){switch(u.label){case 0:t={provider:null,subscription:null};r=this.config.browser;switch(r){case"Chrome":return[3,1];case"Firefox":return[3,1];case"Yandex Browser":return[3,1];case"Samsung Internet for Android":return[3,1];case"Opera":return[3,1];case"Safari":return[3,8]}return[3,16];case 1:if(!cs(this.config))return[3,2];Yo("should use firebase");t.provider=as(this.config.browser||"")+"Firebase";if(e){Yo("found firebase tokenCached");t.subscription={endpoint:e||""}}else{Yo("not found firebase tokenCached");return[2,t]}return[3,7];case 2:t.provider=as(this.config.browser||"");Yo("should not use firebase");Yo("getPushServiceWorker","start");return[4,ss()];case 3:n=u.sent();Yo("getPushServiceWorker","complete");Yo(n);u.label=4;case 4:u.trys.push([4,6,,7]);Yo("serviceWorkerRegistration.pushManager.subscribe","start");if(!n){Yo("getPushServiceWorker has empty, exit func");return[2,t]}i=t;return[4,n.pushManager.subscribe({userVisibleOnly:true})];case 5:i.subscription=u.sent();Yo("serviceWorkerRegistration.pushManager.subscribe","complete");return[3,7];case 6:o=u.sent();Yo(o);return[2,t];case 7:return[3,17];case 8:Yo("should use safari");t.provider="Safari";u.label=9;case 9:u.trys.push([9,14,,15]);s=void 0;if(!ns())return[3,10];s=window.safari.pushNotification.permission(this.config.browsers.Safari.websitePushID);if(s.deviceToken){t.subscription={endpoint:s.deviceToken||""}}else{return[2,t]}return[3,13];case 10:s={permission:Notification.permission};Yo("getPushServiceWorker","start");return[4,ss()];case 11:n=u.sent();Yo("getPushServiceWorker","complete");Yo(n);if(!n){Yo("getPushServiceWorker has empty, exit func");return[2,t]}a=t;return[4,n.pushManager.getSubscription().then((function(e){if(e){return{endpoint:e.endpoint,keys:e.toJSON().keys}}return e}))];case 12:a.subscription=u.sent();if(!t.subscription){return[2,t]}Yo("pushManager.getSubscription",s);u.label=13;case 13:return[3,15];case 14:c=u.sent();Yo(c);return[2,t];case 15:return[3,17];case 16:return[2,t];case 17:return[2,t]}}))}))};e.prototype.suspend=function(t){return xs(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l,d;return Ds(this,(function(h){switch(h.label){case 0:r=t.match,n=t.update,i=t.customData;Yo("get cached token","start");return[4,vs(this.config.randomPrefix)];case 1:o=h.sent();Yo("get cached token","complete:",o);return[4,this.getSubscriptionParams(o)];case 2:s=h.sent(),a=s.provider,c=s.subscription;if(!(a&&(c===null||c===void 0?void 0:c.endpoint)))return[3,7];Yo("fetch suspend subscription","start");h.label=3;case 3:h.trys.push([3,5,,6]);return[4,Cs({action:"suspend",provider:a,subscription:c,match:r,update:n,customData:i,resourceToken:this.config.resourceToken,serverURL:this.config.serverURL})];case 4:u=h.sent();Yo("fetch suspend subscription","complete");if(u&&e.events){f=Jo.suspendSubscription;l={browser:this.config.browser||"",provider:a,tokenCached:o,token:o};Yo("emit "+f,l);e.events.emit(f,l)}return[3,6];case 5:d=h.sent();Yo("fail to suspend subscription",d);return[3,6];case 6:return[3,8];case 7:Yo("fail to suspend subscription");Yo("provider or subscription not available",a&&c);h.label=8;case 8:return[2]}}))}))};e.prototype.update=function(t){return xs(this,void 0,void 0,(function(){var r,n,i,o,s,a,c,u,f,l,d,h;return Ds(this,(function(p){switch(p.label){case 0:r=t.match,n=t.update,i=t.customData,o=t.inexclusive;if(Notification.permission!==Go.Granted){return[2,{status:Ns.Fail}]}Yo("get cached token","start");return[4,vs(this.config.randomPrefix)];case 1:s=p.sent();Yo("get cached token","complete",s);return[4,this.getSubscriptionParams(s)];case 2:a=p.sent(),c=a.provider,u=a.subscription;if(!(c&&(u===null||u===void 0?void 0:u.endpoint)))return[3,7];Yo("fetch update subscription","start");p.label=3;case 3:p.trys.push([3,5,,6]);return[4,Cs({action:"update",provider:c,subscription:u,match:r,update:n,customData:i,inexclusive:o,resourceToken:this.config.resourceToken,serverURL:this.config.serverURL})];case 4:f=p.sent();Yo("fetch update subscription","complete");if(f&&e.events){l=Jo.updateSubscription;d={browser:this.config.browser||"",provider:c,tokenCached:s,token:s};Yo("emit "+l,d);e.events.emit(l,d);return[2,{status:Ns.Ok}]}return[3,6];case 5:h=p.sent();return[2,{status:Ns.Fail}];case 6:return[3,8];case 7:Yo("provider or subscription not available",c&&u);return[2,{status:Ns.Fail}];case 8:return[2,{status:Ns.Fail}]}}))}))};e.prototype.updateSubscription=function(e,t,r){return xs(this,void 0,void 0,(function(){var n;var i=this;return Ds(this,(function(o){n={match:e||{},update:t||{},customData:{}};if(typeof r==="boolean"){n.inexclusive=r}else{n.customData=r||{}}if(document.readyState==="complete"||document.readyState==="interactive"){return[2,this.update(n)]}return[2,new Promise((function(e){window.addEventListener("load",(function(){return xs(i,void 0,void 0,(function(){var t;return Ds(this,(function(r){switch(r.label){case 0:return[4,this.update(n)];case 1:t=r.sent();e(t);return[2]}}))}))}))}))]}))}))};e.prototype.initSubscription=function(e,t,r){return xs(this,void 0,void 0,(function(){var n=this;return Ds(this,(function(i){switch(i.label){case 0:if(this.isPendingInitSubscription){Yo("wait when user give an answer on confirm");return[2]}this.isPendingInitSubscription=true;if(!(document.readyState==="complete"||document.readyState==="interactive"))return[3,2];return[4,this.initialize({match:e||{},update:t||{},customData:r||{}}).finally((function(){n.isPendingInitSubscription=false}))];case 1:i.sent();return[3,3];case 2:window.addEventListener("load",(function(){return xs(n,void 0,void 0,(function(){var n=this;return Ds(this,(function(i){switch(i.label){case 0:return[4,this.initialize({match:e||{},update:t||{},customData:r||{}}).finally((function(){n.isPendingInitSubscription=false}))];case 1:i.sent();return[2]}}))}))}));i.label=3;case 3:return[2]}}))}))};e.prototype.suspendSubscription=function(e,t,r){return xs(this,void 0,void 0,(function(){var n;var i=this;return Ds(this,(function(o){switch(o.label){case 0:n={match:e||{},update:t||{},customData:r||{}};if(!(document.readyState==="complete"||document.readyState==="interactive"))return[3,2];return[4,this.suspend(n)];case 1:o.sent();return[3,3];case 2:window.addEventListener("load",(function(){return xs(i,void 0,void 0,(function(){return Ds(this,(function(e){switch(e.label){case 0:return[4,this.suspend(n)];case 1:e.sent();return[2]}}))}))}));o.label=3;case 3:return[2]}}))}))};e.removeToken=gs;return e}();const Bs=js;var Ws=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n["throw"](e))}catch(e){o(e)}}function c(e){e.done?r(e.value):i(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var zs=undefined&&undefined.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var Us=new e.EventEmitter;Bs.events=Us;if(!window.AKPush){window.AKPush=Bs}(function(){return Ws(this,void 0,void 0,(function(){var e;return zs(this,(function(t){switch(t.label){case 0:Ho.browser=hs(Ho);Yo("set browser",Ho.browser);if(Ho.browser==="Safari"){us({serverCookiePath:Ho.serverCookiePath,resourceToken:Ho.resourceToken,serverURL:Ho.serverURL}).then((function(e){if(e){var t=fs(e["X-Cookie"],"ak")||e.cookie_id;Yo("setCookieID",t);Fs(t)}}))}Yo("migrateToken start");return[4,Es(Ho.randomPrefix)];case 1:e=t.sent();Yo("migrateToken complete",e);Yo("replaceServiceWorker start");return[4,Is({browser:Ho.browser,swPath:Ho.swPath,expirationSWChrome:Ho.expirationSWChrome})];case 2:t.sent();Yo("replaceServiceWorker complete");Yo("initializeServices","start");return[4,Ss(Ho,Us)];case 3:t.sent();Yo("initializeServices","complete");return[2]}}))}))})()})()})();